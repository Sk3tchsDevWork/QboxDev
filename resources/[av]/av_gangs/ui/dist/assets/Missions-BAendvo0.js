import{R as _,L as C,G as I,c as w,r,K as E,j as t,B as p,W as M,I as h,a as b,X as j,T as u,A as R,F as $,H as v}from"./index-DQAlZ3ub.js";import{C as y}from"./Card-CcnzdeRb.js";import{R as k}from"./Rating-iSLpYTl7.js";const z="_grid_19ndu_1",G="_blur_19ndu_15",F="_card_19ndu_31",D="_image_19ndu_43",T="_description_19ndu_53",q="_title_19ndu_63",A="_buttonBox_19ndu_77",H="_button_19ndu_77",s={grid:z,blur:G,card:F,image:D,description:T,title:q,buttonBox:A,button:H},W=()=>{const c=_(C),g=_(I),a=w(g.level,g.max),[l,m]=r.useState([]),[x,L]=r.useState(!1),[f,S]=r.useState(0);E("updateMission",e=>{if(e.name){const o=e.name,i=e.started;m(d=>d.map(n=>n.name===o?{...n,started:i}:n))}});const N=e=>{v("av_gangs","startMission",e)};r.useEffect(()=>{(async()=>{const o=await v("av_gangs","getMissions");if(o){const i=o.sort((d,n)=>d.difficulty-n.difficulty);m(i)}})()},[]),r.useEffect(()=>{l.length>0&&f===l.length&&L(!0)},[f,l.length]);const B=()=>{S(e=>e+1)};return t.jsxs(t.Fragment,{children:[!x&&t.jsx(p,{style:{position:"relative",height:"90%",width:"100%"},children:t.jsx(M,{})}),l.map(e=>t.jsx(h,{src:e.image,style:{display:"none"},onLoad:B,fallbackSrc:"tabs/missions.png"},e.name)),x&&t.jsx(b,{className:s.grid,gutter:"xs",children:l.map(e=>t.jsx(b.Col,{span:4,children:t.jsxs(y,{withBorder:!0,radius:"md",className:s.card,children:[t.jsxs(y.Section,{className:s.image,children:[a.level<e.level&&t.jsx(p,{className:s.blur}),t.jsx(h,{src:e.image,h:240,fallbackSrc:"tabs/missions.png",fit:"cover"})]}),t.jsx(k,{value:e.difficulty,fractions:2,readOnly:!0,emptySymbol:t.jsx(j,{size:"1rem",color:"gray"}),fullSymbol:t.jsx(j,{size:"1rem",color:"rgb(255,105,105)"}),mt:"xs"}),t.jsx(u,{className:s.title,fw:500,truncate:!0,children:a.level>=e.level?e.label:"Classified"}),t.jsx(u,{className:s.description,fz:"sm",c:"dimmed",lineClamp:4,mt:2,children:a.level>=e.level?e.description:`${c.requiredLevel} ${e.level}`}),t.jsxs(R,{className:s.buttonBox,mt:"xs",children:[a.level>=e.level&&e.price&&t.jsx(t.Fragment,{children:t.jsx(u,{fw:500,c:"gray.5",children:`${c.price}: $${e.price.toLocaleString("en-US")}`})}),t.jsx($,{className:s.button,color:"teal",size:"xs",variant:"subtle",disabled:a.level<e.level||e.started,onClick:()=>{N(e)},children:e.started?c.missions.started:c.missions.start})]})]})},e.name))})]})};export{W as default};
