import{r as ae,j as l,B as ke,F as Oe,G as B,a as d}from"./index-DQOIXfH8.js";import{T as he}from"./TextInput-B-iyO67X.js";var A="INUMBER",R="IOP1",L="IOP2",U="IOP3",k="IVAR",I="IVARNAME",j="IFUNCALL",V="IFUNDEF",E="IEXPR",Z="IEXPREVAL",P="IMEMBER",G="IENDSTATEMENT",S="IARRAY";function p(e,t){this.type=e,this.value=t??0}p.prototype.toString=function(){switch(this.type){case A:case R:case L:case U:case k:case I:case G:return this.value;case j:return"CALL "+this.value;case V:return"DEF "+this.value;case S:return"ARRAY "+this.value;case P:return"."+this.value;default:return"Invalid Instruction"}};function W(e){return new p(R,e)}function T(e){return new p(L,e)}function ye(e){return new p(U,e)}function Q(e,t,r,s,n){for(var o=[],i=[],a,u,w,f,x=0;x<e.length;x++){var h=e[x],y=h.type;if(y===A||y===I)Array.isArray(h.value)?o.push.apply(o,Q(h.value.map(function(q){return new p(A,q)}).concat(new p(S,h.value.length)),t,r,s,n)):o.push(h);else if(y===k&&n.hasOwnProperty(h.value))h=new p(A,n[h.value]),o.push(h);else if(y===L&&o.length>1)u=o.pop(),a=o.pop(),f=r[h.value],h=new p(A,f(a.value,u.value)),o.push(h);else if(y===U&&o.length>2)w=o.pop(),u=o.pop(),a=o.pop(),h.value==="?"?o.push(a.value?u.value:w.value):(f=s[h.value],h=new p(A,f(a.value,u.value,w.value)),o.push(h));else if(y===R&&o.length>0)a=o.pop(),f=t[h.value],h=new p(A,f(a.value)),o.push(h);else if(y===E){for(;o.length>0;)i.push(o.shift());i.push(new p(E,Q(h.value,t,r,s,n)))}else if(y===P&&o.length>0)a=o.pop(),o.push(new p(A,a.value[h.value]));else{for(;o.length>0;)i.push(o.shift());i.push(h)}}for(;o.length>0;)i.push(o.shift());return i}function ge(e,t,r){for(var s=[],n=0;n<e.length;n++){var o=e[n],i=o.type;if(i===k&&o.value===t)for(var a=0;a<r.tokens.length;a++){var u=r.tokens[a],w;u.type===R?w=W(u.value):u.type===L?w=T(u.value):u.type===U?w=ye(u.value):w=new p(u.type,u.value),s.push(w)}else i===E?s.push(new p(E,ge(o.value,t,r))):s.push(o)}return s}function C(e,t,r){var s=[],n,o,i,a,u,w;if(J(e))return b(e,r);for(var f=e.length,x=0;x<f;x++){var h=e[x],y=h.type;if(y===A||y===I)s.push(h.value);else if(y===L)o=s.pop(),n=s.pop(),h.value==="and"?s.push(n?!!C(o,t,r):!1):h.value==="or"?s.push(n?!0:!!C(o,t,r)):h.value==="="?(a=t.binaryOps[h.value],s.push(a(n,C(o,t,r),r))):(a=t.binaryOps[h.value],s.push(a(b(n,r),b(o,r))));else if(y===U)i=s.pop(),o=s.pop(),n=s.pop(),h.value==="?"?s.push(C(n?o:i,t,r)):(a=t.ternaryOps[h.value],s.push(a(b(n,r),b(o,r),b(i,r))));else if(y===k)if(h.value in t.functions)s.push(t.functions[h.value]);else if(h.value in t.unaryOps&&t.parser.isOperatorEnabled(h.value))s.push(t.unaryOps[h.value]);else{var q=r[h.value];if(q!==void 0)s.push(q);else throw new Error("undefined variable: "+h.value)}else if(y===R)n=s.pop(),a=t.unaryOps[h.value],s.push(a(b(n,r)));else if(y===j){for(w=h.value,u=[];w-- >0;)u.unshift(b(s.pop(),r));if(a=s.pop(),a.apply&&a.call)s.push(a.apply(void 0,u));else throw new Error(a+" is not a function")}else if(y===V)s.push(function(){for(var Ae=s.pop(),Y=[],Me=h.value;Me-- >0;)Y.unshift(s.pop());var ie=s.pop(),K=function(){for(var oe=Object.assign({},r),D=0,be=Y.length;D<be;D++)oe[Y[D]]=arguments[D];return C(Ae,t,oe)};return Object.defineProperty(K,"name",{value:ie,writable:!1}),r[ie]=K,K}());else if(y===E)s.push(Te(h,t));else if(y===Z)s.push(h);else if(y===P)n=s.pop(),s.push(n[h.value]);else if(y===G)s.pop();else if(y===S){for(w=h.value,u=[];w-- >0;)u.unshift(s.pop());s.push(u)}else throw new Error("invalid Expression")}if(s.length>1)throw new Error("invalid Expression (parity)");return s[0]===0?0:b(s[0],r)}function Te(e,t,r){return J(e)?e:{type:Z,value:function(s){return C(e.value,t,s)}}}function J(e){return e&&e.type===Z}function b(e,t){return J(e)?e.value(t):e}function ee(e,t){for(var r=[],s,n,o,i,a,u,w=0;w<e.length;w++){var f=e[w],x=f.type;if(x===A)typeof f.value=="number"&&f.value<0?r.push("("+f.value+")"):Array.isArray(f.value)?r.push("["+f.value.map(ue).join(", ")+"]"):r.push(ue(f.value));else if(x===L)n=r.pop(),s=r.pop(),i=f.value,t?i==="^"?r.push("Math.pow("+s+", "+n+")"):i==="and"?r.push("(!!"+s+" && !!"+n+")"):i==="or"?r.push("(!!"+s+" || !!"+n+")"):i==="||"?r.push("(function(a,b){ return Array.isArray(a) && Array.isArray(b) ? a.concat(b) : String(a) + String(b); }(("+s+"),("+n+")))"):i==="=="?r.push("("+s+" === "+n+")"):i==="!="?r.push("("+s+" !== "+n+")"):i==="["?r.push(s+"[("+n+") | 0]"):r.push("("+s+" "+i+" "+n+")"):i==="["?r.push(s+"["+n+"]"):r.push("("+s+" "+i+" "+n+")");else if(x===U)if(o=r.pop(),n=r.pop(),s=r.pop(),i=f.value,i==="?")r.push("("+s+" ? "+n+" : "+o+")");else throw new Error("invalid Expression");else if(x===k||x===I)r.push(f.value);else if(x===R)s=r.pop(),i=f.value,i==="-"||i==="+"?r.push("("+i+s+")"):t?i==="not"?r.push("(!"+s+")"):i==="!"?r.push("fac("+s+")"):r.push(i+"("+s+")"):i==="!"?r.push("("+s+"!)"):r.push("("+i+" "+s+")");else if(x===j){for(u=f.value,a=[];u-- >0;)a.unshift(r.pop());i=r.pop(),r.push(i+"("+a.join(", ")+")")}else if(x===V){for(n=r.pop(),u=f.value,a=[];u-- >0;)a.unshift(r.pop());s=r.pop(),t?r.push("("+s+" = function("+a.join(", ")+") { return "+n+" })"):r.push("("+s+"("+a.join(", ")+") = "+n+")")}else if(x===P)s=r.pop(),r.push(s+"."+f.value);else if(x===S){for(u=f.value,a=[];u-- >0;)a.unshift(r.pop());r.push("["+a.join(", ")+"]")}else if(x===E)r.push("("+ee(f.value,t)+")");else if(x!==G)throw new Error("invalid Expression")}return r.length>1&&(t?r=[r.join(",")]:r=[r.join(";")]),String(r[0])}function ue(e){return typeof e=="string"?JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029"):e}function F(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return!0;return!1}function te(e,t,r){r=r||{};for(var s=!!r.withMembers,n=null,o=0;o<e.length;o++){var i=e[o];i.type===k||i.type===I?!s&&!F(t,i.value)?t.push(i.value):(n!==null&&(F(t,n)||t.push(n)),n=i.value):i.type===P&&s&&n!==null?n+="."+i.value:i.type===E?te(i.value,t,r):n!==null&&(F(t,n)||t.push(n),n=null)}n!==null&&!F(t,n)&&t.push(n)}function M(e,t){this.tokens=e,this.parser=t,this.unaryOps=t.unaryOps,this.binaryOps=t.binaryOps,this.ternaryOps=t.ternaryOps,this.functions=t.functions}M.prototype.simplify=function(e){return e=e||{},new M(Q(this.tokens,this.unaryOps,this.binaryOps,this.ternaryOps,e),this.parser)};M.prototype.substitute=function(e,t){return t instanceof M||(t=this.parser.parse(String(t))),new M(ge(this.tokens,e,t),this.parser)};M.prototype.evaluate=function(e){return e=e||{},C(this.tokens,this,e)};M.prototype.toString=function(){return ee(this.tokens,!1)};M.prototype.symbols=function(e){e=e||{};var t=[];return te(this.tokens,t,e),t};M.prototype.variables=function(e){e=e||{};var t=[];te(this.tokens,t,e);var r=this.functions;return t.filter(function(s){return!(s in r)})};M.prototype.toJSFunction=function(e,t){var r=this,s=new Function(e,"with(this.functions) with (this.ternaryOps) with (this.binaryOps) with (this.unaryOps) { return "+ee(this.simplify(t).tokens,!0)+"; }");return function(){return s.apply(r,arguments)}};var _="TEOF",c="TOP",X="TNUMBER",xe="TSTRING",O="TPAREN",N="TBRACKET",$="TCOMMA",re="TNAME",se="TSEMICOLON";function de(e,t,r){this.type=e,this.value=t,this.index=r}de.prototype.toString=function(){return this.type+": "+this.value};function g(e,t){this.pos=0,this.current=null,this.unaryOps=e.unaryOps,this.binaryOps=e.binaryOps,this.ternaryOps=e.ternaryOps,this.consts=e.consts,this.expression=t,this.savedPosition=0,this.savedCurrent=null,this.options=e.options,this.parser=e}g.prototype.newToken=function(e,t,r){return new de(e,t,r??this.pos)};g.prototype.save=function(){this.savedPosition=this.pos,this.savedCurrent=this.current};g.prototype.restore=function(){this.pos=this.savedPosition,this.current=this.savedCurrent};g.prototype.next=function(){if(this.pos>=this.expression.length)return this.newToken(_,"EOF");if(this.isWhitespace()||this.isComment())return this.next();if(this.isRadixInteger()||this.isNumber()||this.isOperator()||this.isString()||this.isParen()||this.isBracket()||this.isComma()||this.isSemicolon()||this.isNamedOp()||this.isConst()||this.isName())return this.current;this.parseError('Unknown character "'+this.expression.charAt(this.pos)+'"')};g.prototype.isString=function(){var e=!1,t=this.pos,r=this.expression.charAt(t);if(r==="'"||r==='"')for(var s=this.expression.indexOf(r,t+1);s>=0&&this.pos<this.expression.length;){if(this.pos=s+1,this.expression.charAt(s-1)!=="\\"){var n=this.expression.substring(t+1,s);this.current=this.newToken(xe,this.unescape(n),t),e=!0;break}s=this.expression.indexOf(r,s+1)}return e};g.prototype.isParen=function(){var e=this.expression.charAt(this.pos);return e==="("||e===")"?(this.current=this.newToken(O,e),this.pos++,!0):!1};g.prototype.isBracket=function(){var e=this.expression.charAt(this.pos);return(e==="["||e==="]")&&this.isOperatorEnabled("[")?(this.current=this.newToken(N,e),this.pos++,!0):!1};g.prototype.isComma=function(){var e=this.expression.charAt(this.pos);return e===","?(this.current=this.newToken($,","),this.pos++,!0):!1};g.prototype.isSemicolon=function(){var e=this.expression.charAt(this.pos);return e===";"?(this.current=this.newToken(se,";"),this.pos++,!0):!1};g.prototype.isConst=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&r!=="."&&(r<"0"||r>"9")))break}if(t>e){var s=this.expression.substring(e,t);if(s in this.consts)return this.current=this.newToken(X,this.consts[s]),this.pos+=s.length,!0}return!1};g.prototype.isNamedOp=function(){for(var e=this.pos,t=e;t<this.expression.length;t++){var r=this.expression.charAt(t);if(r.toUpperCase()===r.toLowerCase()&&(t===this.pos||r!=="_"&&(r<"0"||r>"9")))break}if(t>e){var s=this.expression.substring(e,t);if(this.isOperatorEnabled(s)&&(s in this.binaryOps||s in this.unaryOps||s in this.ternaryOps))return this.current=this.newToken(c,s),this.pos+=s.length,!0}return!1};g.prototype.isName=function(){for(var e=this.pos,t=e,r=!1;t<this.expression.length;t++){var s=this.expression.charAt(t);if(s.toUpperCase()===s.toLowerCase()){if(t===this.pos&&(s==="$"||s==="_")){s==="_"&&(r=!0);continue}else if(t===this.pos||!r||s!=="_"&&(s<"0"||s>"9"))break}else r=!0}if(r){var n=this.expression.substring(e,t);return this.current=this.newToken(re,n),this.pos+=n.length,!0}return!1};g.prototype.isWhitespace=function(){for(var e=!1,t=this.expression.charAt(this.pos);(t===" "||t==="	"||t===`
`||t==="\r")&&(e=!0,this.pos++,!(this.pos>=this.expression.length));)t=this.expression.charAt(this.pos);return e};var Ce=/^[0-9a-f]{4}$/i;g.prototype.unescape=function(e){var t=e.indexOf("\\");if(t<0)return e;for(var r=e.substring(0,t);t>=0;){var s=e.charAt(++t);switch(s){case"'":r+="'";break;case'"':r+='"';break;case"\\":r+="\\";break;case"/":r+="/";break;case"b":r+="\b";break;case"f":r+="\f";break;case"n":r+=`
`;break;case"r":r+="\r";break;case"t":r+="	";break;case"u":var n=e.substring(t+1,t+5);Ce.test(n)||this.parseError("Illegal escape sequence: \\u"+n),r+=String.fromCharCode(parseInt(n,16)),t+=4;break;default:throw this.parseError('Illegal escape sequence: "\\'+s+'"')}++t;var o=e.indexOf("\\",t);r+=e.substring(t,o<0?e.length:o),t=o}return r};g.prototype.isComment=function(){var e=this.expression.charAt(this.pos);return e==="/"&&this.expression.charAt(this.pos+1)==="*"?(this.pos=this.expression.indexOf("*/",this.pos)+2,this.pos===1&&(this.pos=this.expression.length),!0):!1};g.prototype.isRadixInteger=function(){var e=this.pos;if(e>=this.expression.length-2||this.expression.charAt(e)!=="0")return!1;++e;var t,r;if(this.expression.charAt(e)==="x")t=16,r=/^[0-9a-f]$/i,++e;else if(this.expression.charAt(e)==="b")t=2,r=/^[01]$/i,++e;else return!1;for(var s=!1,n=e;e<this.expression.length;){var o=this.expression.charAt(e);if(r.test(o))e++,s=!0;else break}return s&&(this.current=this.newToken(X,parseInt(this.expression.substring(n,e),t)),this.pos=e),s};g.prototype.isNumber=function(){for(var e=!1,t=this.pos,r=t,s=t,n=!1,o=!1,i;t<this.expression.length&&(i=this.expression.charAt(t),i>="0"&&i<="9"||!n&&i===".");)i==="."?n=!0:o=!0,t++,e=o;if(e&&(s=t),i==="e"||i==="E"){t++;for(var a=!0,u=!1;t<this.expression.length;){if(i=this.expression.charAt(t),a&&(i==="+"||i==="-"))a=!1;else if(i>="0"&&i<="9")u=!0,a=!1;else break;t++}u||(t=s)}return e?(this.current=this.newToken(X,parseFloat(this.expression.substring(r,t))),this.pos=t):this.pos=s,e};g.prototype.isOperator=function(){var e=this.pos,t=this.expression.charAt(this.pos);if(t==="+"||t==="-"||t==="*"||t==="/"||t==="%"||t==="^"||t==="?"||t===":"||t===".")this.current=this.newToken(c,t);else if(t==="∙"||t==="•")this.current=this.newToken(c,"*");else if(t===">")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(c,">="),this.pos++):this.current=this.newToken(c,">");else if(t==="<")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(c,"<="),this.pos++):this.current=this.newToken(c,"<");else if(t==="|")if(this.expression.charAt(this.pos+1)==="|")this.current=this.newToken(c,"||"),this.pos++;else return!1;else if(t==="=")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(c,"=="),this.pos++):this.current=this.newToken(c,t);else if(t==="!")this.expression.charAt(this.pos+1)==="="?(this.current=this.newToken(c,"!="),this.pos++):this.current=this.newToken(c,t);else return!1;return this.pos++,this.isOperatorEnabled(this.current.value)?!0:(this.pos=e,!1)};g.prototype.isOperatorEnabled=function(e){return this.parser.isOperatorEnabled(e)};g.prototype.getCoordinates=function(){var e=0,t,r=-1;do e++,t=this.pos-r,r=this.expression.indexOf(`
`,r+1);while(r>=0&&r<this.pos);return{line:e,column:t}};g.prototype.parseError=function(e){var t=this.getCoordinates();throw new Error("parse error ["+t.line+":"+t.column+"]: "+e)};function v(e,t,r){this.parser=e,this.tokens=t,this.current=null,this.nextToken=null,this.next(),this.savedCurrent=null,this.savedNextToken=null,this.allowMemberAccess=r.allowMemberAccess!==!1}v.prototype.next=function(){return this.current=this.nextToken,this.nextToken=this.tokens.next()};v.prototype.tokenMatches=function(e,t){return typeof t>"u"?!0:Array.isArray(t)?F(t,e.value):typeof t=="function"?t(e):e.value===t};v.prototype.save=function(){this.savedCurrent=this.current,this.savedNextToken=this.nextToken,this.tokens.save()};v.prototype.restore=function(){this.tokens.restore(),this.current=this.savedCurrent,this.nextToken=this.savedNextToken};v.prototype.accept=function(e,t){return this.nextToken.type===e&&this.tokenMatches(this.nextToken,t)?(this.next(),!0):!1};v.prototype.expect=function(e,t){if(!this.accept(e,t)){var r=this.tokens.getCoordinates();throw new Error("parse error ["+r.line+":"+r.column+"]: Expected "+(t||e))}};v.prototype.parseAtom=function(e){var t=this.tokens.unaryOps;function r(n){return n.value in t}if(this.accept(re)||this.accept(c,r))e.push(new p(k,this.current.value));else if(this.accept(X))e.push(new p(A,this.current.value));else if(this.accept(xe))e.push(new p(A,this.current.value));else if(this.accept(O,"("))this.parseExpression(e),this.expect(O,")");else if(this.accept(N,"["))if(this.accept(N,"]"))e.push(new p(S,0));else{var s=this.parseArrayList(e);e.push(new p(S,s))}else throw new Error("unexpected "+this.nextToken)};v.prototype.parseExpression=function(e){var t=[];this.parseUntilEndStatement(e,t)||(this.parseVariableAssignmentExpression(t),!this.parseUntilEndStatement(e,t)&&this.pushExpression(e,t))};v.prototype.pushExpression=function(e,t){for(var r=0,s=t.length;r<s;r++)e.push(t[r])};v.prototype.parseUntilEndStatement=function(e,t){return this.accept(se)?(this.nextToken&&this.nextToken.type!==_&&!(this.nextToken.type===O&&this.nextToken.value===")")&&t.push(new p(G)),this.nextToken.type!==_&&this.parseExpression(t),e.push(new p(E,t)),!0):!1};v.prototype.parseArrayList=function(e){for(var t=0;!this.accept(N,"]");)for(this.parseExpression(e),++t;this.accept($);)this.parseExpression(e),++t;return t};v.prototype.parseVariableAssignmentExpression=function(e){for(this.parseConditionalExpression(e);this.accept(c,"=");){var t=e.pop(),r=[],s=e.length-1;if(t.type===j){if(!this.tokens.isOperatorEnabled("()="))throw new Error("function definition is not permitted");for(var n=0,o=t.value+1;n<o;n++){var i=s-n;e[i].type===k&&(e[i]=new p(I,e[i].value))}this.parseVariableAssignmentExpression(r),e.push(new p(E,r)),e.push(new p(V,t.value));continue}if(t.type!==k&&t.type!==P)throw new Error("expected variable for assignment");this.parseVariableAssignmentExpression(r),e.push(new p(I,t.value)),e.push(new p(E,r)),e.push(T("="))}};v.prototype.parseConditionalExpression=function(e){for(this.parseOrExpression(e);this.accept(c,"?");){var t=[],r=[];this.parseConditionalExpression(t),this.expect(c,":"),this.parseConditionalExpression(r),e.push(new p(E,t)),e.push(new p(E,r)),e.push(ye("?"))}};v.prototype.parseOrExpression=function(e){for(this.parseAndExpression(e);this.accept(c,"or");){var t=[];this.parseAndExpression(t),e.push(new p(E,t)),e.push(T("or"))}};v.prototype.parseAndExpression=function(e){for(this.parseComparison(e);this.accept(c,"and");){var t=[];this.parseComparison(t),e.push(new p(E,t)),e.push(T("and"))}};var Ie=["==","!=","<","<=",">=",">","in"];v.prototype.parseComparison=function(e){for(this.parseAddSub(e);this.accept(c,Ie);){var t=this.current;this.parseAddSub(e),e.push(T(t.value))}};var Pe=["+","-","||"];v.prototype.parseAddSub=function(e){for(this.parseTerm(e);this.accept(c,Pe);){var t=this.current;this.parseTerm(e),e.push(T(t.value))}};var me=["*","/","%"];v.prototype.parseTerm=function(e){for(this.parseFactor(e);this.accept(c,me);){var t=this.current;this.parseFactor(e),e.push(T(t.value))}};v.prototype.parseFactor=function(e){var t=this.tokens.unaryOps;function r(n){return n.value in t}if(this.save(),this.accept(c,r)){if(this.current.value!=="-"&&this.current.value!=="+"){if(this.nextToken.type===O&&this.nextToken.value==="("){this.restore(),this.parseExponential(e);return}else if(this.nextToken.type===se||this.nextToken.type===$||this.nextToken.type===_||this.nextToken.type===O&&this.nextToken.value===")"){this.restore(),this.parseAtom(e);return}}var s=this.current;this.parseFactor(e),e.push(W(s.value))}else this.parseExponential(e)};v.prototype.parseExponential=function(e){for(this.parsePostfixExpression(e);this.accept(c,"^");)this.parseFactor(e),e.push(T("^"))};v.prototype.parsePostfixExpression=function(e){for(this.parseFunctionCall(e);this.accept(c,"!");)e.push(W("!"))};v.prototype.parseFunctionCall=function(e){var t=this.tokens.unaryOps;function r(o){return o.value in t}if(this.accept(c,r)){var s=this.current;this.parseAtom(e),e.push(W(s.value))}else for(this.parseMemberExpression(e);this.accept(O,"(");)if(this.accept(O,")"))e.push(new p(j,0));else{var n=this.parseArgumentList(e);e.push(new p(j,n))}};v.prototype.parseArgumentList=function(e){for(var t=0;!this.accept(O,")");)for(this.parseExpression(e),++t;this.accept($);)this.parseExpression(e),++t;return t};v.prototype.parseMemberExpression=function(e){for(this.parseAtom(e);this.accept(c,".")||this.accept(N,"[");){var t=this.current;if(t.value==="."){if(!this.allowMemberAccess)throw new Error('unexpected ".", member access is not permitted');this.expect(re),e.push(new p(P,this.current.value))}else if(t.value==="["){if(!this.tokens.isOperatorEnabled("["))throw new Error('unexpected "[]", arrays are disabled');this.parseExpression(e),this.expect(N,"]"),e.push(T("["))}else throw new Error("unexpected symbol: "+t.value)}};function Fe(e,t){return Number(e)+Number(t)}function je(e,t){return e-t}function Se(e,t){return e*t}function Ne(e,t){return e/t}function Re(e,t){return e%t}function Le(e,t){return Array.isArray(e)&&Array.isArray(t)?e.concat(t):""+e+t}function Ue(e,t){return e===t}function Be(e,t){return e!==t}function _e(e,t){return e>t}function qe(e,t){return e<t}function De(e,t){return e>=t}function Ve(e,t){return e<=t}function Ge(e,t){return!!(e&&t)}function We(e,t){return!!(e||t)}function Xe(e,t){return F(t,e)}function $e(e){return(Math.exp(e)-Math.exp(-e))/2}function Ye(e){return(Math.exp(e)+Math.exp(-e))/2}function Ke(e){return e===1/0?1:e===-1/0?-1:(Math.exp(e)-Math.exp(-e))/(Math.exp(e)+Math.exp(-e))}function ze(e){return e===-1/0?e:Math.log(e+Math.sqrt(e*e+1))}function He(e){return Math.log(e+Math.sqrt(e*e-1))}function Qe(e){return Math.log((1+e)/(1-e))/2}function pe(e){return Math.log(e)*Math.LOG10E}function Ze(e){return-e}function Je(e){return!e}function et(e){return e<0?Math.ceil(e):Math.floor(e)}function tt(e){return Math.random()*(e||1)}function le(e){return ne(e+1)}function rt(e){return isFinite(e)&&e===Math.round(e)}var st=4.7421875,z=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];function ne(e){var t,r;if(rt(e)){if(e<=0)return isFinite(e)?1/0:NaN;if(e>171)return 1/0;for(var s=e-2,n=e-1;s>1;)n*=s,s--;return n===0&&(n=1),n}if(e<.5)return Math.PI/(Math.sin(Math.PI*e)*ne(1-e));if(e>=171.35)return 1/0;if(e>85){var o=e*e,i=o*e,a=i*e,u=a*e;return Math.sqrt(2*Math.PI/e)*Math.pow(e/Math.E,e)*(1+1/(12*e)+1/(288*o)-139/(51840*i)-571/(2488320*a)+163879/(209018880*u)+5246819/(75246796800*u*e))}--e,r=z[0];for(var w=1;w<z.length;++w)r+=z[w]/(e+w);return t=e+st+.5,Math.sqrt(2*Math.PI)*Math.pow(t,e+.5)*Math.exp(-t)*r}function nt(e){return Array.isArray(e)?e.length:String(e).length}function ce(){for(var e=0,t=0,r=0;r<arguments.length;r++){var s=Math.abs(arguments[r]),n;t<s?(n=t/s,e=e*n*n+1,t=s):s>0?(n=s/t,e+=n*n):e+=s}return t===1/0?1/0:t*Math.sqrt(e)}function fe(e,t,r){return e?t:r}function it(e,t){return typeof t>"u"||+t==0?Math.round(e):(e=+e,t=-+t,isNaN(e)||!(typeof t=="number"&&t%1===0)?NaN:(e=e.toString().split("e"),e=Math.round(+(e[0]+"e"+(e[1]?+e[1]-t:-t))),e=e.toString().split("e"),+(e[0]+"e"+(e[1]?+e[1]+t:t))))}function ot(e,t,r){return r&&(r[e]=t),t}function at(e,t){return e[t|0]}function ht(e){return arguments.length===1&&Array.isArray(e)?Math.max.apply(Math,e):Math.max.apply(Math,arguments)}function ut(e){return arguments.length===1&&Array.isArray(e)?Math.min.apply(Math,e):Math.min.apply(Math,arguments)}function pt(e,t){if(typeof e!="function")throw new Error("First argument to map is not a function");if(!Array.isArray(t))throw new Error("Second argument to map is not an array");return t.map(function(r,s){return e(r,s)})}function lt(e,t,r){if(typeof e!="function")throw new Error("First argument to fold is not a function");if(!Array.isArray(r))throw new Error("Second argument to fold is not an array");return r.reduce(function(s,n,o){return e(s,n,o)},t)}function ct(e,t){if(typeof e!="function")throw new Error("First argument to filter is not a function");if(!Array.isArray(t))throw new Error("Second argument to filter is not an array");return t.filter(function(r,s){return e(r,s)})}function ft(e,t){if(!(Array.isArray(t)||typeof t=="string"))throw new Error("Second argument to indexOf is not a string or array");return t.indexOf(e)}function vt(e,t){if(!Array.isArray(t))throw new Error("Second argument to join is not an array");return t.join(e)}function wt(e){return(e>0)-(e<0)||+e}var ve=1/3;function yt(e){return e<0?-Math.pow(-e,ve):Math.pow(e,ve)}function gt(e){return Math.exp(e)-1}function xt(e){return Math.log(1+e)}function dt(e){return Math.log(e)/Math.LN2}function m(e){this.options=e||{},this.unaryOps={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:Math.sinh||$e,cosh:Math.cosh||Ye,tanh:Math.tanh||Ke,asinh:Math.asinh||ze,acosh:Math.acosh||He,atanh:Math.atanh||Qe,sqrt:Math.sqrt,cbrt:Math.cbrt||yt,log:Math.log,log2:Math.log2||dt,ln:Math.log,lg:Math.log10||pe,log10:Math.log10||pe,expm1:Math.expm1||gt,log1p:Math.log1p||xt,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:Math.trunc||et,"-":Ze,"+":Number,exp:Math.exp,not:Je,length:nt,"!":le,sign:Math.sign||wt},this.binaryOps={"+":Fe,"-":je,"*":Se,"/":Ne,"%":Re,"^":Math.pow,"||":Le,"==":Ue,"!=":Be,">":_e,"<":qe,">=":De,"<=":Ve,and:Ge,or:We,in:Xe,"=":ot,"[":at},this.ternaryOps={"?":fe},this.functions={random:tt,fac:le,min:ut,max:ht,hypot:Math.hypot||ce,pyt:Math.hypot||ce,pow:Math.pow,atan2:Math.atan2,if:fe,gamma:ne,roundTo:it,map:pt,fold:lt,filter:ct,indexOf:ft,join:vt},this.consts={E:Math.E,PI:Math.PI,true:!0,false:!1}}m.prototype.parse=function(e){var t=[],r=new v(this,new g(this,e),{allowMemberAccess:this.options.allowMemberAccess});return r.parseExpression(t),r.expect(_,"EOF"),new M(t,this)};m.prototype.evaluate=function(e,t){return this.parse(e).evaluate(t)};var Ee=new m;m.parse=function(e){return Ee.parse(e)};m.evaluate=function(e,t){return Ee.parse(e).evaluate(t)};var we={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"remainder","^":"power","!":"factorial","<":"comparison",">":"comparison","<=":"comparison",">=":"comparison","==":"comparison","!=":"comparison","||":"concatenate",and:"logical",or:"logical",not:"logical","?":"conditional",":":"conditional","=":"assignment","[":"array","()=":"fndef"};function Et(e){return we.hasOwnProperty(e)?we[e]:e}m.prototype.isOperatorEnabled=function(e){var t=Et(e),r=this.options.operators||{};return!(t in r)||!!r[t]};const At="_input_bdocr_1",H={input:At},kt=()=>{const[e,t]=ae.useState(""),[r,s]=ae.useState(""),n=a=>{t(u=>u+a)},o=()=>{try{const u=new m().evaluate(e);s(u.toString())}catch{s("Error")}},i=()=>{t(""),s("")};return l.jsxs(ke,{style:{width:"260px",margin:"auto",padding:"15px",boxShadow:"0 0 10px rgba(0, 0, 0, 0.1)",backgroundColor:"#3A3A3C",backdropFilter:"blur(5px)"},children:[l.jsxs(Oe,{direction:"column",className:H.result,h:95,children:[l.jsx(he,{value:e,readOnly:!0,style:{marginBottom:"10px"},styles:{input:{textAlign:"right"}},classNames:H}),l.jsx(he,{value:r,placeholder:"0",readOnly:!0,style:{marginBottom:"20px"},styles:{input:{fontSize:"26px",color:"white",fontWeight:"600",textAlign:"right"}},classNames:H})]}),l.jsxs(B,{justify:"space-between",grow:!0,mt:"xs",gap:"xs",children:[l.jsx(d,{onClick:()=>n("1"),color:"rgb(110,113,128)",children:"1"}),l.jsx(d,{onClick:()=>n("2"),color:"rgb(110,113,128)",children:"2"}),l.jsx(d,{onClick:()=>n("3"),color:"rgb(110,113,128)",children:"3"}),l.jsx(d,{onClick:()=>n("+"),color:"#FF9F0A",children:"+"})]}),l.jsxs(B,{justify:"space-between",grow:!0,mt:"xs",gap:"xs",children:[l.jsx(d,{onClick:()=>n("4"),color:"rgb(110,113,128)",children:"4"}),l.jsx(d,{onClick:()=>n("5"),color:"rgb(110,113,128)",children:"5"}),l.jsx(d,{onClick:()=>n("6"),color:"rgb(110,113,128)",children:"6"}),l.jsx(d,{onClick:()=>n("-"),color:"#FF9F0A",children:"-"})]}),l.jsxs(B,{justify:"space-between",grow:!0,mt:"xs",gap:"xs",children:[l.jsx(d,{onClick:()=>n("7"),color:"rgb(110,113,128)",children:"7"}),l.jsx(d,{onClick:()=>n("8"),color:"rgb(110,113,128)",children:"8"}),l.jsx(d,{onClick:()=>n("9"),color:"rgb(110,113,128)",children:"9"}),l.jsx(d,{onClick:()=>n("*"),color:"#FF9F0A",children:"*"})]}),l.jsxs(B,{justify:"space-between",grow:!0,mt:"xs",gap:"xs",children:[l.jsx(d,{onClick:i,color:"#8E8E93",children:"C"}),l.jsx(d,{onClick:()=>n("0"),color:"rgb(110,113,128)",children:"0"}),l.jsx(d,{onClick:()=>n("."),color:"rgb(110,113,128)",children:"."}),l.jsx(d,{onClick:()=>n("/"),color:"#FF9F0A",children:"/"})]}),l.jsx(B,{justify:"center",grow:!0,style:{marginTop:"10px"},children:l.jsx(d,{onClick:o,fullWidth:!0,color:"#FF9F0A",children:"="})})]})};export{kt as default};
