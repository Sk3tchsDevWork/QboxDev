Aegis=Aegis or {}; Aegis.Capabilities=Aegis.Capabilities or {}; local function reqR(r,cap) local req=Permissions and Permissions.Policy and Permissions.Policy.require_reason if req and req[cap] and (not r or r=='') then return false,'reason required' end return true end Aegis.Capabilities['moderation.ban.request']=function(s,d) local ok,err=reqR(d.reason,'moderation.ban.request') if not ok then return false,err end local tkn=Aegis.Duo.Request(s,'moderation.ban',d) TriggerClientEvent('ox_lib:notify', s, {description=('Ban requested. Token: %s'):format(tkn), type='info'}) return true,tkn end Aegis.Capabilities['moderation.kick']=function(s,d) local ok,err=reqR(d.reason,'moderation.kick') if not ok then return false,err end DropPlayer(tonumber(d.target), ('[Aegis] %s'):format(d.reason or 'Kicked')) return true end