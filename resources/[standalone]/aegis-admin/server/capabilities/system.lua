Aegis=Aegis or {}; Aegis.Capabilities=Aegis.Capabilities or {}; Aegis.Capabilities['system.stats']=function(s,d) local resCount=#GetNumResources() local players=#GetPlayers() local uptime=GetGameTimer() return {resources=resCount,players=players,uptime_ms=uptime} end Aegis.Capabilities['system.announce']=function(s,d) local msg=tostring(d.message or 'Server Announcement') local ok=false local sc,err=pcall(function() ExecuteCommand(('txaBroadcast "%s"'):format(msg)) end) if sc then ok=true end if not ok then TriggerClientEvent('chat:addMessage', -1, { args={'^1SERVER', msg} }) end return true end Aegis.Capabilities['system.restart.queue']=function(s,d) local minutes=tonumber(d.minutes or 1) TriggerClientEvent('chat:addMessage', -1, { args={'^1SERVER', ('Scheduled restart in %d minutes.'):format(minutes)} }) return true end Aegis.Capabilities['system.restart.cancel']=function(s,d) TriggerClientEvent('chat:addMessage', -1, { args={'^2SERVER', 'Scheduled restart cancelled.'} }) return true end