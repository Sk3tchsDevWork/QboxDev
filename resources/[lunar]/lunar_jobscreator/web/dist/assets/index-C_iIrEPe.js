import{r as x,u as Es,j as e,c as hs,t as sa,a as na,J as be,b as Qs,S as Sn,d as zn,L as ta,B as en,U as rn,e as Gs,W as aa,H as ia,f as ra,M as la,C as ca,g as oa,h as da,i as xa,k as ha,l as ua,D as ma,m as ja,P as pa,n as ga,R as fa,o as _a,p as ba,A as ya,q as Na,s as ln,v as we,w as va,x as Tn,I as In,F as $n,y as wa,z as Ca,T as ka,O as Sa,E as Pn,G as Se,K as An,N as za,Q as Dn,V as Mn,X as En,Y as On,Z as Os,_ as Rn,$ as Ta,a0 as Vn,a1 as Ln,a2 as Ia,a3 as $a,a4 as Fn,a5 as qn,a6 as Pa,a7 as Aa,a8 as Jn,a9 as Un,aa as Da,ab as Ma,ac as Ea,ad as Bn,ae as us,af as Oa,ag as Ra,ah as G,ai as H,aj as je,ak as ze,al as pe,am as Hn,an as Gn,ao as Zn,ap as Wn,aq as Kn,ar as Xn,as as Va,at as La,au as Rs,av as Fa,aw as qa,ax as Pe,ay as Yn,az as Te,aA as Ja,aB as Ua,aC as Ie,aD as Ae,aE as Ba,aF as Qn,aG as Vs,aH as Ha,aI as Ga,aJ as Za,aK as Wa,aL as Ka,aM as Xa,aN as Ya,aO as Qa,aP as ei,aQ as si,aR as et,aS as ni,aT as B,aU as ms,aV as _e,aW as cn,aX as Zs,aY as st,aZ as ti,a_ as ai,a$ as nt,b0 as ii,b1 as Ue,b2 as oe,b3 as De,b4 as Be,b5 as He,b6 as Ge,b7 as Ze,b8 as We,b9 as Ke,ba as de,bb as Xe,bc as Ye,bd as Qe,be as es,bf as ss,bg as ri,bh as tt,bi as li,bj as at,bk as it,bl as ci,bm as rt,bn as oi,bo as lt,bp as ct,bq as di,br as xi,bs as ot,bt as hi,bu as ui,bv as mi,bw as dt,bx as js,by as Ss,bz as ys,bA as Cs,bB as Je,bC as ns,bD as ts,bE as xt,bF as ht,bG as ut,bH as ji,bI as pi,bJ as gi,bK as mt,bL as jt,bM as fi,bN as _i,bO as pt,bP as bi,bQ as yi,bR as Ni,bS as vi,bT as wi,bU as Ci,bV as ki,bW as ke,bX as Ds,bY as gt,bZ as Si,b_ as zi,b$ as Ti,c0 as Ii,c1 as ft,c2 as $i,c3 as Pi,c4 as Ai,c5 as Di}from"./vendor-dwtsG2sb.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(n){if(n.ep)return;n.ep=!0;const c=i(n);fetch(n.href,c)}})();const _t=()=>!window.invokeNative,Mi=()=>{};async function ce(s,t,i,a){const n={method:"post",headers:{"Content-Type":"application/json; charset=UTF-8"},body:JSON.stringify(t)};if(_t()&&i!=null)return a&&await new Promise(c=>setTimeout(c,a)),i;do try{const c=window.GetParentResourceName?window.GetParentResourceName():"nui-frame-app";return await(await fetch(`https://${c}/${s}`,n)).json()}catch{await new Promise(o=>setTimeout(o,500))}while(s!="hideFrame");return{}}const bt=x.createContext(null),Ei=({children:s})=>{const[t,i]=x.useState(!1),[a,n]=x.useState(!1),c=Es();function o(r){r?(n(!0),setTimeout(()=>i(r),100)):(i(r),ce("hideFrame"))}return x.useEffect(()=>{let r;return t||(r=setTimeout(()=>n(!1),500)),()=>clearTimeout(r)},[t]),x.useEffect(()=>{if(!t)return;const r=N=>{["Escape"].includes(N.code)&&(_t()||ce("hideFrame"),i(!t),setTimeout(()=>c("/"),500))};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[t]),e.jsx(bt.Provider,{value:{visible:t,setVisible:o},children:e.jsx("div",{className:"fade-container",style:{opacity:t?1:0,display:a?"block":"none"},children:s})})},ks=()=>x.useContext(bt),ds=(s,t)=>{const i=x.useRef(Mi);x.useEffect(()=>{i.current=t},[t]),x.useEffect(()=>{const a=n=>{const{action:c,data:o}=n.data;i.current&&c===s&&i.current(o)};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[s])},q=hs(s=>({data:{},get:(t,...i)=>{let a=q.getState().data[t];if(!a)return t;for(let n of i)a=a.replace("%s",n);return a},set:t=>s({data:{...t}})}));function R(...s){return sa(na(s))}function Me(){be.error("Invalid form data. Please re-check all of the tabs for missing data or mistakes.")}const sn=Qs("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=x.forwardRef(({className:s,variant:t,size:i,asChild:a=!1,...n},c)=>{const o=a?Sn:"button";return e.jsx(o,{className:R(sn({variant:t,size:i,className:s})),ref:c,...n})});f.displayName="Button";const le=hs(s=>({jobs:[],setJobs:t=>s({jobs:t}),addJob:t=>{s(i=>({jobs:[...i.jobs,t]})),ce("createJob",t)},setJob:t=>s(i=>i.jobs.some(n=>n.name===t.name)?{jobs:i.jobs.map(n=>n.name===t.name?t:n)}:{jobs:[...i.jobs,t]}),updateJob:(t,i)=>{s(a=>({jobs:a.jobs.map(n=>n.name===t.name?t:n)})),i?ce("updateJobField",{name:t.name,field:i,data:t[i]},void 0,100):ce("updateJob",t)},removeJob:(t,i)=>{s(a=>({jobs:a.jobs.filter(n=>n.name!==t)})),i||ce("removeJob",t)}})),Ne=()=>{const{id:s}=zn(),{jobs:t}=le();return t.find(i=>i.name===s)};function Oi(){const s=q(),t=[{icon:ta,label:s.get("ui_dashboard"),path:"/"},{icon:en,label:s.get("ui_jobs"),path:"/jobs"},{icon:rn,label:s.get("ui_community"),path:"/community"},{icon:Gs,label:s.get("ui_settings"),path:"/settings"},{icon:aa,label:s.get("ui_webhooks"),path:"/webhooks"},{icon:ia,label:s.get("ui_history"),path:"/history"}],i=[{icon:Gs,label:s.get("ui_general"),subpath:"/"},{icon:rn,label:s.get("ui_grades"),subpath:"/grades"},{icon:ra,label:s.get("ui_actions"),subpath:"/actions"},{icon:la,label:s.get("ui_blips"),subpath:"/blips"},{icon:ca,label:s.get("ui_boss_menus"),subpath:"/boss-menus"},{icon:oa,label:s.get("ui_cloakrooms"),subpath:"/cloakrooms"},{icon:da,label:s.get("ui_collecting"),subpath:"/collecting"},{icon:xa,label:s.get("ui_spawner_zones"),subpath:"/spawner-zones"},{icon:ha,label:s.get("ui_crafting"),subpath:"/crafting"},{icon:ua,label:s.get("ui_garages"),subpath:"/garages"},{icon:ma,label:s.get("ui_selling"),subpath:"/selling"},{icon:ja,label:s.get("ui_shops"),subpath:"/shops"},{icon:pa,label:s.get("ui_stashes"),subpath:"/stashes"},{icon:ga,label:s.get("ui_alarms"),subpath:"/alarms"},{icon:fa,label:s.get("ui_registers"),subpath:"/registers"},{icon:_a,label:s.get("ui_animation_zones"),subpath:"/animation-zones"},{icon:ba,label:s.get("ui_music_players"),subpath:"/music-players"},{icon:ya,label:s.get("ui_teleports"),subpath:"/teleports"}],a=Na(),n=Es(),{id:c}=zn(),{jobs:o}=le(),r=o.find(w=>w.name===c),N=a.pathname.includes("/edit"),[d,b]=x.useState(-1),v=x.useRef(null);return x.useEffect(()=>{const k=(N?i:t).findIndex(m=>N?a.pathname.endsWith(m.subpath):a.pathname===m.path);b(k),k!==-1&&v.current&&(v.current.style.transform=`translateY(${k*2.75}rem)`)},[a,N]),e.jsxs("div",{className:"w-64 bg-background border-r h-full flex flex-col justify-between",children:[e.jsxs("div",{className:`space-y-1 overflow-y-auto max-h-[36rem] p-4 ${N?"border-b":""} relative`,children:[e.jsx("div",{ref:v,className:"absolute left-4 top-5 right-4 rounded-md h-10 bg-muted transition-transform duration-300 ease-in-out",style:{transform:`translateY(${d*2.75}rem)`,opacity:d!==-1?1:0}}),N?i.map((w,k)=>e.jsx(f,{variant:"ghost",className:R("w-full justify-start text-muted-foreground hover:text-foreground hover:bg-transparent relative z-10",a.pathname.endsWith(w.subpath)&&"text-foreground"),asChild:!0,children:e.jsxs(ln,{to:`/edit/${c}${w.subpath}`,children:[e.jsx(w.icon,{className:"mr-3 h-5 w-5"}),w.label]})},k)):t.map((w,k)=>e.jsx(f,{variant:"ghost",className:R("w-full justify-start text-muted-foreground hover:text-foreground hover:bg-transparent relative z-10",a.pathname===w.path&&"text-foreground"),asChild:!0,children:e.jsxs(ln,{to:w.path,children:[e.jsx(w.icon,{className:"mr-3 h-5 w-5"}),w.label]})},k))]}),N&&e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex flex-col text-xs gap-1",children:[e.jsxs("p",{className:"font-bold flex items-center",children:[e.jsx(we,{className:"mr-1 h-[0.6rem] w-[0.6rem]"}),s.get("ui_editing_job")]}),e.jsx("p",{className:"mb-4 text-sm text-muted-foreground line-clamp-1",children:r==null?void 0:r.label})]}),e.jsxs(f,{variant:"outline",className:"w-full",onClick:()=>n("/jobs"),children:[e.jsx(va,{className:"mr-3 h-4 w-4"}),s.get("ui_go_back")]})]})]})}const Ls=x.forwardRef(({className:s,...t},i)=>e.jsx(Tn,{ref:i,className:R("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...t}));Ls.displayName=Tn.displayName;const Fs=x.forwardRef(({className:s,...t},i)=>e.jsx(In,{ref:i,className:R("aspect-square h-full w-full",s),...t}));Fs.displayName=In.displayName;const qs=x.forwardRef(({className:s,...t},i)=>e.jsx($n,{ref:i,className:R("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...t}));qs.displayName=$n.displayName;function yt(){const[s,t]=x.useState("dark");return x.useEffect(()=>{const i=localStorage.getItem("theme");i?t(i):window.matchMedia("(prefers-color-scheme: dark)").matches&&t("dark")},[]),x.useEffect(()=>{localStorage.setItem("theme",s),document.documentElement.classList.toggle("dark",s==="dark")},[s]),{theme:s,setTheme:t}}function Ri(){const{theme:s,setTheme:t}=yt();return e.jsxs(f,{variant:"outline",size:"icon",onClick:()=>t(s==="light"?"dark":"light"),className:"bg-background hover:bg-background2 text-foreground",children:[e.jsx(wa,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(Ca,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"})]})}const Nt=hs(s=>({serverId:0,username:"",avatarUrl:"",setProfile:t=>s(t)}));function Vi({className:s}){const{username:t,avatarUrl:i,serverId:a}=Nt();return e.jsxs("header",{className:R("flex items-center justify-between p-4 bg-background border-b rounded-t-3xl",s),children:[e.jsx(Ri,{}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex flex-col items-end",children:[e.jsx("p",{className:"text-sm font-medium",children:t}),e.jsxs("p",{className:"text-sm font-medium",children:["ID: ",a]})]}),e.jsxs(Ls,{children:[e.jsx(Fs,{src:i,alt:t}),e.jsx(qs,{children:t.charAt(0).toUpperCase()})]})]})]})}const Li=[{name:"police",label:"Los Santos Police Department",type:"leo",defaultDuty:!0,offDutyPay:!1,whitelisted:!0,canWash:!1,playerActions:{steal:!1,handcuff:"both",drag:!0,carry:!0,bill:!0,revive:{item:"defibrillator",removeAfterUse:!1},heal:{item:"firstaid",removeAfterUse:!0}},vehicleActions:{putInsideVehicle:!0,takeOutOfVehicle:!0,hijack:{item:"lockpick",removeAfterUse:!0},repair:{item:"repairkit",removeAfterUse:!0},clean:{item:"cleaningkit",removeAfterUse:!0},impound:!1},grades:[{name:"cadet",label:"Cadet",salary:1500},{name:"officer",label:"Officer",salary:2e3},{name:"sergeant",label:"Sergeant",salary:2500},{name:"lieutenant",label:"Lieutenant",salary:3e3},{name:"captain",label:"Captain",salary:3500,bossActions:!0}],bossMenus:[{radius:3,icon:"fas fa-briefcase",target:!0,prop:[{model:"prop_police_phone",offset:{x:0,y:0,z:1},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:447.35,y:-975.57,z:30.69}]}],blips:[{coords:{x:425.1,y:-979.5,z:30.7},name:"Police Station",sprite:60,size:1,color:29,global:!0}],cloakrooms:[{radius:3,target:!0,prop:[{model:"prop_ld_int_safe_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:452.6,y:-992.8,z:30.6}]}],garages:[{label:"Police Garage",vehicleType:"car",type:"normal",shared:!0,radius:5,saveRadius:30,target:!0,prop:[{model:"prop_police_door_surround",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{coords:{x:454.6,y:-1017.4,z:28.4},spawnCoords:{x:438.4,y:-1018.3,z:27.7,w:90}}],vehicles:[{model:"police",label:"Police Cruiser",grade:0,price:0,props:{}},{model:"police2",label:"Police SUV",grade:2,price:0,props:{}}]}],collecting:[{label:"Collect Evidence",progress:"Collecting evidence...",icon:"fas fa-search",radius:3,duration:5e3,items:[{name:"evidence",count:{min:1,max:3}}],animation:{dict:"anim@amb@clubhouse@tutorial@bkr_tut_ig3@",clip:"machinic_loop_mechandplayer"},animationProp:{model:"prop_cs_hand_radio",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},requiredItem:"evidence_bag",max:10,recover:300,target:!0,prop:[{model:"prop_cs_hand_radio",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:440,y:-976,z:30.7}]}],advancedCollecting:[{label:"Collect Fingerprints",progress:"Collecting fingerprints...",icon:"fas fa-fingerprint",radius:3,duration:8e3,items:[{name:"fingerprint",count:{min:1,max:1}}],animation:{dict:"anim@amb@clubhouse@tutorial@bkr_tut_ig3@",clip:"machinic_loop_mechandplayer"},animationProp:{model:"prop_cs_hand_radio",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},requiredItem:"fingerprint_kit",propModel:"prop_cs_hand_radio",interactionOffset:{x:0,y:0,z:0},target:!0,locations:[{coords:{x:445,y:-980,z:30.7},radius:5,interval:600,maxSpawned:3}]}],crafting:[{label:"Police Equipment Crafting",grade:2,icon:"fas fa-tools",radius:3,entries:[{blueprint:"handcuffs_blueprint",duration:1e4,progress:"Crafting handcuffs...",animation:{dict:"anim@amb@clubhouse@tutorial@bkr_tut_ig3@",clip:"machinic_loop_mechandplayer"},animationProp:{model:"prop_cs_hand_radio",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},requiredItems:[{name:"metal",count:2},{name:"plastic",count:1}],giveItems:[{name:"handcuffs",count:1}]}],target:!0,prop:[{model:"prop_tool_bench02",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:460,y:-981,z:30.7}]}],selling:[{label:"Sell Confiscated Items",progress:"Selling items...",icon:"fas fa-dollar-sign",radius:3,grade:3,animation:{dict:"mp_common",clip:"givetake1_a"},duration:5e3,sellAtOnce:!1,items:[{name:"drug_sample",price:{min:100,max:200},currency:"bank"}],employeePercentage:10,target:!0,prop:[{model:"prop_till_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:455,y:-980,z:30.7}]}],shops:[{label:"Police Equipment Shop",icon:"fas fa-shield-alt",grade:0,items:[{name:"body_armor",price:500,currency:"bank",icon:"fas fa-vest",image:"body_armor.png",grade:0},{name:"radio",price:200,currency:"bank",icon:"fas fa-broadcast-tower",image:"radio.png",grade:0}],radius:3,target:!0,prop:[{model:"prop_till_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:452,y:-980,z:30.7}]}],stashes:[{label:"Police Evidence Locker",name:"police_evidence",grade:0,shared:!0,icon:"fas fa-box",slots:50,maxWeight:1e5,global:!1,radius:3,target:!0,prop:[{model:"prop_cabinet_02b",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:459,y:-985,z:30.7}]}],registers:[{employeePercentage:10,radius:3,target:!0,prop:[{model:"prop_till_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:451,y:-973,z:30.7}]}],animationZones:[{label:"Police Training Area",stop:"Stop Training",icon:"fas fa-dumbbell",radius:5,target:!0,duration:6e4,progress:"Training...",notify:"You've completed your training session.",animation:{dict:"rcmfanatic1maryann_stretchidle_b",clip:"idle_e"},animationProp:{model:"prop_barbell_01",bone:28422,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},checkOccupied:!0,move:!1,back:!1,disableFreeze:!1,global:!0,offset:{x:0,y:0,z:0},locations:[{x:450,y:-993,z:30.7}]}],musicPlayers:[{label:"Police Station Music Player",icon:"fas fa-music",radius:10,target:!0,soundDistance:20,prop:[{model:"prop_boombox_01",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}],ped:[{model:"s_m_y_cop_01",offset:{x:0,y:0,z:0},heading:0}],locations:[{x:440,y:-985,z:30.7}]}],teleports:[{from:{label:"Ground Floor",icon:"fas fa-arrow-up",target:{x:440,y:-981,z:30.7},coords:{x:440,y:-981,z:30.7,w:0}},to:{label:"Rooftop",icon:"fas fa-arrow-down",target:{x:458,y:-984,z:43.7},coords:{x:458,y:-984,z:43.7,w:0}},radius:30}]}],nn=hs((s,t)=>({globalWebhook:"",settings:{alarms:!1,collecting:!1,crafting:!0,vehicleBought:!0,registers:!0,selling:!0,shops:!0,stashes:!0},jobs:{},rawSet:i=>{s(i)},set:i=>{s(i),ce("updateWebhookData",i)}})),vt=hs(s=>({history:[],setHistory:t=>s({history:t})})),wt=hs(s=>({framework:"es_extended",setFramework:t=>s({framework:t})})),Ct=hs(s=>({totalJobs:0,onDutyCount:0,lastOnDutyCount:0,wealthiestJob:null,jobCounts:{},setStats:t=>{s(i=>({...i,...t}))}})),kt=hs(s=>({settings:{interactDistance:3,impoundPrice:500,handcuffItems:!0,handcuffsItemName:"handcuffs",ziptiesItemName:"zipties",handcuffsSkillCheck:!0,sprintWhileDrag:!1,actionsMenu:!0,radialMenu:!1,disableTargetInteractions:!1,tackleCooldown:1e4,tackleRadius:2,playerActions:{steal:!1,handcuff:!1,drag:!1,carry:!1,bill:!1,tackle:!1,revive:!1,heal:!1},vehicleActions:{putInsideVehicle:!1,takeOutOfVehicle:!1,hijack:{item:"lockpick",removeAfterUse:!0},repair:!1,clean:!1,impound:!1},durations:{steal:3e3,revive:1e4,heal:5e3,hijack:1e3,repair:1e4,clean:1e4,impound:1e4}},setSettings:t=>s(i=>({settings:{...i.settings,...t}}))})),Fi=()=>{const s=ks(),t=q(),i=Es();x.useState(!1);const{theme:a}=yt(),{jobs:n,setJobs:c,setJob:o,removeJob:r}=le(),N=nn(),{setHistory:d}=vt(),{setFramework:b}=wt(),{setStats:v}=Ct(),{setSettings:w}=kt(),{setProfile:k}=Nt();return x.useEffect(()=>{async function m(){const T=await ce("getJobs",void 0,Li,200);c(T)}m()},[]),ds("open",()=>{s.setVisible(!0)}),ds("updateJob",m=>{o(m)}),ds("removeJob",m=>{r(m,!0)}),ds("updateJobs",m=>{c(m)}),ds("openEditJob",m=>{i(`/edit/${m}/`)}),ds("updateWebhookData",m=>{N.rawSet(m)}),ds("updateHistory",m=>{d(m)}),ds("updateStats",m=>{v(m)}),ds("updateSettings",m=>{w(m)}),ds("updateProfile",m=>{k(m)}),x.useEffect(()=>{(async()=>{const T=await ce("getHistory",void 0,[]);d(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await ce("getFramework",void 0,"qb-core");b(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await ce("getStats",void 0,{totalJobs:0,onDutyCount:0,jobCounts:{},wealthiestJob:null,lastOnDutyCount:0});v(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await ce("getSettings",void 0,{});w(T)})()},[]),x.useEffect(()=>{(async()=>{const T=await ce("getProfile",void 0,{serverId:21,username:"Andrew.",avatarUrl:""});k(T)})()},[]),x.useEffect(()=>{(async()=>{try{const T=await ce("getLanguage",void 0,"en"),P=await fetch(`./locales/${T}.json`);if(!P.ok)throw new Error("Preferred language not available");const z=await P.json();t.set(z)}catch{console.warn("Failed to load preferred language, falling back to English");const z=await(await fetch("./locales/en.json")).json();t.set(z)}})()},[]),e.jsxs("div",{className:"w-screen h-screen flex justify-center items-center bg-transparent",children:[e.jsx(ka,{position:"top-center",theme:a,toastOptions:{className:"bg-background text-foreground font-[Inter] border"}}),e.jsxs("div",{className:"w-[76rem] h-[45rem] bg-background rounded-3xl shadow-lg border overflow-hidden flex flex-col",children:[e.jsx(Vi,{}),e.jsxs("div",{className:"flex grow overflow-hidden",children:[e.jsx(Oi,{}),e.jsx("div",{className:"w-full p-6",children:e.jsx(Sa,{})})]})]})]})},ae=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:i,className:R("w-full caption-bottom text-sm",s),...t})}));ae.displayName="Table";const ie=x.forwardRef(({className:s,...t},i)=>e.jsx("thead",{ref:i,className:R("[&_tr]:border-b",s),...t}));ie.displayName="TableHeader";const re=x.forwardRef(({className:s,...t},i)=>e.jsx("tbody",{ref:i,className:R("[&_tr:last-child]:border-0",s),...t}));re.displayName="TableBody";const qi=x.forwardRef(({className:s,...t},i)=>e.jsx("tfoot",{ref:i,className:R("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t}));qi.displayName="TableFooter";const L=x.forwardRef(({className:s,...t},i)=>e.jsx("tr",{ref:i,className:R("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t}));L.displayName="TableRow";const S=x.forwardRef(({className:s,...t},i)=>e.jsx("th",{ref:i,className:R("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t}));S.displayName="TableHead";const C=x.forwardRef(({className:s,...t},i)=>e.jsx("td",{ref:i,className:R("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t}));C.displayName="TableCell";const Ji=x.forwardRef(({className:s,...t},i)=>e.jsx("caption",{ref:i,className:R("mt-4 text-sm text-muted-foreground",s),...t}));Ji.displayName="TableCaption";const ee=Ia,se=$a,Ui=x.forwardRef(({className:s,inset:t,children:i,...a},n)=>e.jsxs(Pn,{ref:n,className:R("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",s),...a,children:[i,e.jsx(Se,{className:"ml-auto h-4 w-4"})]}));Ui.displayName=Pn.displayName;const Bi=x.forwardRef(({className:s,...t},i)=>e.jsx(An,{ref:i,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...t}));Bi.displayName=An.displayName;const Q=x.forwardRef(({className:s,sideOffset:t=4,...i},a)=>e.jsx(za,{children:e.jsx(Dn,{ref:a,sideOffset:t,className:R("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})}));Q.displayName=Dn.displayName;const K=x.forwardRef(({className:s,inset:t,...i},a)=>e.jsx(Mn,{ref:a,className:R("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",s),...i}));K.displayName=Mn.displayName;const Hi=x.forwardRef(({className:s,children:t,checked:i,...a},n)=>e.jsxs(En,{ref:n,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:i,...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(On,{children:e.jsx(Os,{className:"h-4 w-4"})})}),t]}));Hi.displayName=En.displayName;const Gi=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(Rn,{ref:a,className:R("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(On,{children:e.jsx(Ta,{className:"h-2 w-2 fill-current"})})}),t]}));Gi.displayName=Rn.displayName;const Zi=x.forwardRef(({className:s,inset:t,...i},a)=>e.jsx(Vn,{ref:a,className:R("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",s),...i}));Zi.displayName=Vn.displayName;const Wi=x.forwardRef(({className:s,...t},i)=>e.jsx(Ln,{ref:i,className:R("-mx-1 my-1 h-px bg-muted",s),...t}));Wi.displayName=Ln.displayName;const y=x.forwardRef(({className:s,type:t,...i},a)=>(i.value=i.value===void 0?"":i.value,e.jsx("input",{type:t,className:R("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a,...i})));y.displayName="Input";const ge=Ma,Ce=Ea,Ki=Da,St=x.forwardRef(({className:s,...t},i)=>e.jsx(Fn,{ref:i,className:R("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));St.displayName=Fn.displayName;const xe=x.forwardRef(({className:s,children:t,...i},a)=>{const n=o=>{var r;o.key==="Escape"&&o.stopPropagation(),(r=i.onKeyDown)==null||r.call(i,o)},c=ks();return e.jsx(Ki,{children:e.jsxs("div",{style:{opacity:c!=null&&c.visible?1:0},children:[e.jsx(St,{}),e.jsxs(qn,{ref:a,className:R("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-2xl",s),onKeyDown:n,...i,children:[t,e.jsxs(Pa,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Aa,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})})});xe.displayName=qn.displayName;const he=({className:s,...t})=>e.jsx("div",{className:R("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});he.displayName="DialogHeader";const Js=({className:s,...t})=>e.jsx("div",{className:R("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Js.displayName="DialogFooter";const ue=x.forwardRef(({className:s,...t},i)=>e.jsx(Jn,{ref:i,className:R("text-lg font-bold leading-none tracking-tight",s),...t}));ue.displayName=Jn.displayName;const me=x.forwardRef(({className:s,...t},i)=>e.jsx(Un,{ref:i,className:R("text-sm text-muted-foreground",s),...t}));me.displayName=Un.displayName;const Xi=Qs("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),zt=x.forwardRef(({className:s,...t},i)=>e.jsx(Bn,{ref:i,className:R(Xi(),s),...t}));zt.displayName=Bn.displayName;const fe=Oa,Tt=x.createContext({}),g=({...s})=>e.jsx(Tt.Provider,{value:{name:s.name},children:e.jsx(Ra,{...s})}),Us=()=>{const s=x.useContext(Tt),t=x.useContext(It),{getFieldState:i,formState:a}=us(),n=i(s.name,a);if(!s)throw new Error("useFormField should be used within <FormField>");const{id:c}=t;return{id:c,name:s.name,formItemId:`${c}-form-item`,formDescriptionId:`${c}-form-item-description`,formMessageId:`${c}-form-item-message`,...n}},It=x.createContext({}),j=x.forwardRef(({className:s,...t},i)=>{const a=x.useId();return e.jsx(It.Provider,{value:{id:a},children:e.jsx("div",{ref:i,className:R("space-y-2",s),...t})})});j.displayName="FormItem";const _=x.forwardRef(({className:s,...t},i)=>{const{error:a,formItemId:n}=Us();return e.jsx(zt,{ref:i,className:R(a&&"text-destructive",s),htmlFor:n,...t})});_.displayName="FormLabel";const p=x.forwardRef(({...s},t)=>{const{error:i,formItemId:a,formDescriptionId:n,formMessageId:c}=Us();return e.jsx(Sn,{ref:t,id:a,"aria-describedby":i?`${n} ${c}`:`${n}`,"aria-invalid":!!i,...s})});p.displayName="FormControl";const I=x.forwardRef(({className:s,...t},i)=>{const{formDescriptionId:a}=Us();return e.jsx("p",{ref:i,id:a,className:R("text-sm text-muted-foreground",s),...t})});I.displayName="FormDescription";const E=x.forwardRef(({className:s,children:t,...i},a)=>{const n=q(),{error:c,formMessageId:o}=Us(),r=c?n.get(String(c==null?void 0:c.message)):t;return!r||r===(c==null?void 0:c.message)?null:e.jsx("p",{ref:a,id:o,className:R("text-sm font-medium text-destructive",s),...i,children:r})});E.displayName="FormMessage";const Yi=G({name:H().min(1,"ui_error_required").regex(/^[a-zA-Z0-9_]+$/,"ui_error_name_invalid"),label:H().min(1,"ui_error_required")});function Qi({duplicateJob:s,setDuplicateJob:t,onCreate:i}){const a=q(),[n,c]=x.useState(!1);x.useEffect(()=>{s&&c(!0)},[s]);const o=je({resolver:pe(Yi),defaultValues:{name:"",label:""}});function r(d){c(d),setTimeout(()=>{t(null),o.reset()},200)}function N(d){i({...s?{...s,...d}:d}),c(!1)}return e.jsxs(ge,{open:n,onOpenChange:r,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>o.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",a.get("ui_create_new_job")]})}),e.jsxs(xe,{className:"sm:max-w-[425px]",children:[e.jsxs(he,{children:[e.jsx(ue,{children:s?a.get("ui_duplicate_job"):a.get("ui_create_new_job")}),e.jsx(me,{})]}),e.jsx(fe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N),className:"space-y-4",children:[e.jsx(g,{control:o.control,name:"name",render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:a.get("ui_job_name")}),e.jsx(p,{children:e.jsx(y,{...d,placeholder:a.get("ui_job_name_placeholder")})}),e.jsx(I,{children:a.get("ui_job_name_explain")}),e.jsx(E,{})]})}),e.jsx(g,{control:o.control,name:"label",render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:a.get("ui_job_label")}),e.jsx(p,{children:e.jsx(y,{...d,placeholder:a.get("ui_job_label_placeholder")})}),e.jsx(I,{children:a.get("ui_job_label_description")}),e.jsx(E,{})]})}),e.jsx(f,{type:"submit",children:a.get("ui_create_job")})]})})]})]})}const er=La,sr=Va,$t=x.forwardRef(({className:s,...t},i)=>e.jsx(Hn,{className:R("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:i}));$t.displayName=Hn.displayName;const Pt=x.forwardRef(({className:s,...t},i)=>e.jsxs(sr,{children:[e.jsx($t,{}),e.jsx(Gn,{ref:i,className:R("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));Pt.displayName=Gn.displayName;const At=({className:s,...t})=>e.jsx("div",{className:R("flex flex-col space-y-2 text-center sm:text-left",s),...t});At.displayName="AlertDialogHeader";const Dt=({className:s,...t})=>e.jsx("div",{className:R("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});Dt.displayName="AlertDialogFooter";const Mt=x.forwardRef(({className:s,...t},i)=>e.jsx(Zn,{ref:i,className:R("text-lg font-semibold",s),...t}));Mt.displayName=Zn.displayName;const Et=x.forwardRef(({className:s,...t},i)=>e.jsx(Wn,{ref:i,className:R("text-sm text-muted-foreground",s),...t}));Et.displayName=Wn.displayName;const Ot=x.forwardRef(({className:s,...t},i)=>e.jsx(Kn,{ref:i,className:R(sn(),s),...t}));Ot.displayName=Kn.displayName;const Rt=x.forwardRef(({className:s,...t},i)=>e.jsx(Xn,{ref:i,className:R(sn({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));Rt.displayName=Xn.displayName;const bs={remoteUrl:"https://jobs.lunar-scripts.com"};function nr({shareJob:s,setShareJob:t}){const i=q(),[a,n]=x.useState(!1),c=async o=>{o.preventDefault(),n(!0);try{const r=await fetch(`${bs.remoteUrl}/api/jobs/upload-data`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!r.ok)throw new Error;const{id:N}=await r.json();window.invokeNative?window.invokeNative("openUrl",`${bs.remoteUrl}/jobs/create?id=${N}`):window.open(`${bs.remoteUrl}/jobs/create?id=${N}`,"_blank")}catch{be.error(i.get("ui_error_share_job"))}setTimeout(()=>n(!1),500),t(null)};return e.jsx(er,{open:!!s,onOpenChange:()=>t(null),children:e.jsxs(Pt,{children:[e.jsxs(At,{children:[e.jsx(Mt,{children:i.get("ui_share_job")}),e.jsx(Et,{children:i.get("ui_share_job_description")})]}),e.jsxs(Dt,{children:[e.jsx(Rt,{asChild:!0,children:e.jsx(f,{variant:"outline",onClick:()=>t(null),disabled:a,children:i.get("ui_cancel")})}),e.jsx(Ot,{asChild:!0,children:e.jsxs(f,{onClick:c,disabled:a,children:[a&&e.jsx(Rs,{className:"mr-2 w-4 h-4 animate-spin"}),i.get("ui_confirm")]})})]})]})})}function Ee({searchTerm:s}){const t=q();return e.jsxs("div",{className:"flex flex-col items-center justify-center h-[40vh] gap-6",children:[e.jsx("div",{className:"flex items-center justify-center w-20 h-20 bg-secondary rounded-full",children:s.length>0?e.jsx(Fa,{className:"w-10 h-10 text-secondary-foreground"}):e.jsx(qa,{className:"w-10 h-10 text-secondary-foreground"})}),e.jsx("div",{className:"space-y-2 text-center",children:s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:t.get("ui_no_results")}),e.jsx("p",{className:"text-muted-foreground",children:t.get("ui_no_results_description")})]}):e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-2xl font-bold tracking-tight",children:t.get("ui_no_data_to_display")}),e.jsx("p",{className:"text-muted-foreground",children:t.get("ui_no_data_to_display_description")})]})})]})}const tr=({isOpen:s,onClose:t,onConfirm:i,title:a,description:n})=>e.jsx(ge,{open:s,onOpenChange:t,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:a}),e.jsx(me,{children:n})]}),e.jsxs(Js,{children:[e.jsx(f,{variant:"outline",onClick:t,children:"Cancel"}),e.jsx(f,{onClick:i,children:"Confirm"})]})]})}),Vt=x.createContext(null),$e=()=>{const s=x.useContext(Vt);if(!s)throw new Error("useConfirm must be used within a ConfirmProvider");return s.confirm},ar=({children:s})=>{const[t,i]=x.useState({isOpen:!1,title:"",description:"",resolve:null}),a=x.useCallback((o,r)=>new Promise(N=>{i({isOpen:!0,title:o,description:r,resolve:N})}),[]),n=x.useCallback(()=>{i(o=>({...o,isOpen:!1})),t.resolve&&t.resolve(!1)},[t]),c=x.useCallback(()=>{i(o=>({...o,isOpen:!1})),t.resolve&&t.resolve(!0)},[t]);return e.jsxs(Vt.Provider,{value:{confirm:a},children:[s,e.jsx(tr,{isOpen:t.isOpen,onClose:n,onConfirm:c,title:t.title,description:t.description})]})},ir={name:"",label:"",grades:[{name:"boss",label:"Boss",salary:1e3,bossActions:!0}],playerActions:{},vehicleActions:{},bossMenus:[],blips:[],cloakrooms:[],collecting:[],crafting:[],garages:[],selling:[],shops:[],stashes:[],alarms:[],registers:[],animationZones:[],musicPlayers:[],teleports:[]};function rr(){const s=q(),{jobs:t,addJob:i,removeJob:a}=le(),[n,c]=x.useState("name"),[o,r]=x.useState("asc"),[N,d]=x.useState(1),[b,v]=x.useState(""),[w,k]=x.useState(null),[m,T]=x.useState(null),P=Es(),z=6,A=$e(),[V]=Pe(b,300),F=Yn.useMemo(()=>n?[...t].sort((M,Z)=>M[n]<Z[n]?o==="asc"?-1:1:M[n]>Z[n]?o==="asc"?1:-1:0):t,[t,n,o]).filter(M=>M.name.toLowerCase().includes(V.toLowerCase())),D=F.slice((N-1)*z,N*z),W=Math.ceil(F.length/z),l=M=>{n===M?r(o==="asc"?"desc":"asc"):(c(M),r("asc"))},u=({column:M})=>n!==M?e.jsx(Ba,{className:"ml-2 h-4 w-4"}):o==="asc"?e.jsx(Qn,{className:"ml-2 h-4 w-4"}):e.jsx(Vs,{className:"ml-2 h-4 w-4"}),h=M=>{if(t.some(Z=>Z.name===M.name)){be.error(s.get("ui_job_already_exists"));return}i({...ir,...M})};return e.jsxs("div",{className:"space-y-4 h-full flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_jobs"),value:b,onChange:M=>v(M.target.value),className:"max-w-sm"}),e.jsx(Qi,{duplicateJob:w,setDuplicateJob:k,onCreate:h}),e.jsx(nr,{shareJob:m,setShareJob:T})]}),e.jsx("div",{className:"grow",children:e.jsxs(ae,{className:"table-fixed w-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{onClick:()=>l("name"),className:"cursor-pointer w-1/6",children:e.jsxs("span",{className:"flex items-center",children:[s.get("ui_job_name"),e.jsx(u,{column:"name"})]})}),e.jsx(S,{onClick:()=>l("label"),className:"cursor-pointer w-1/4",children:e.jsxs("span",{className:"flex items-center",children:[s.get("ui_job_label"),e.jsx(u,{column:"label"})]})}),e.jsx(S,{className:"w-1/3",children:s.get("ui_job_grades")}),e.jsx(S,{className:"w-1/6",children:s.get("ui_actions")})]})}),e.jsx(re,{children:D.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:V})})}):D.map(M=>e.jsxs(L,{children:[e.jsx(C,{className:"truncate",children:M.name}),e.jsx(C,{className:"truncate",children:M.label}),e.jsx(C,{className:"truncate",children:M.grades.length>0?M.grades.map(Z=>Z.label).join(", "):"No grades defined yet"}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onSelect:()=>P(`/edit/${M.name}/`),children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),s.get("ui_edit")]}),e.jsxs(K,{onSelect:()=>k(M),children:[e.jsx(Ja,{className:"mr-2 h-4 w-4"}),s.get("ui_duplicate")]}),e.jsxs(K,{onSelect:()=>T(M),children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),s.get("ui_share")]}),e.jsxs(K,{className:"text-red-500",onSelect:async()=>{await A(s.get("ui_delete_job"),s.get("ui_delete_job_description"))&&a(M.name)},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),s.get("ui_delete")]})]})]})})]},M.name))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>d(M=>Math.max(M-1,1)),disabled:N===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(W)].map((M,Z)=>{const X=Z+1;return X===1||X===W||X>=N-1&&X<=N+1?e.jsx(f,{variant:N===X?"outline":"ghost",size:"icon",onClick:()=>d(X),children:X},Z):X===N-2||X===N+2?e.jsx("span",{children:"..."},Z):null})}),e.jsx(f,{onClick:()=>d(M=>Math.min(M+1,W)),disabled:N===W||W===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const ye=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:R("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t}));ye.displayName="Card";const gs=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:R("flex flex-col space-y-1.5 p-6",s),...t}));gs.displayName="CardHeader";const fs=x.forwardRef(({className:s,isDiv:t,...i},a)=>{const n=t?"div":"h3";return e.jsx(n,{ref:a,className:R("text-2xl font-semibold leading-none tracking-tight",s),...i})});fs.displayName="CardTitle";const Ms=x.forwardRef(({className:s,isDiv:t,...i},a)=>{const n=t?"div":"p";return e.jsx(n,{ref:a,className:R("text-sm text-muted-foreground",s),...i})});Ms.displayName="CardDescription";const ve=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:R("p-6 pt-0",s),...t}));ve.displayName="CardContent";const lr=x.forwardRef(({className:s,...t},i)=>e.jsx("div",{ref:i,className:R("flex items-center p-6 pt-0",s),...t}));lr.displayName="CardFooter";const cr={light:"",dark:".dark"},Lt=x.createContext(null);function Ft(){const s=x.useContext(Lt);if(!s)throw new Error("useChart must be used within a <ChartContainer />");return s}const qt=x.forwardRef(({id:s,className:t,children:i,config:a,...n},c)=>{const o=x.useId(),r=`chart-${s||o.replace(/:/g,"")}`;return e.jsx(Lt.Provider,{value:{config:a},children:e.jsxs("div",{"data-chart":r,ref:c,className:R("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",t),...n,children:[e.jsx(or,{id:r,config:a}),e.jsx(Ha,{children:i})]})})});qt.displayName="Chart";const or=({id:s,config:t})=>{const i=Object.entries(t).filter(([a,n])=>n.theme||n.color);return i.length?e.jsx("style",{dangerouslySetInnerHTML:{__html:Object.entries(cr).map(([a,n])=>`
${n} [data-chart=${s}] {
${i.map(([c,o])=>{var N;const r=((N=o.theme)==null?void 0:N[a])||o.color;return r?`  --color-${c}: ${r};`:null}).join(`
`)}
}
`).join(`
`)}}):null},dr=Ga,Jt=x.forwardRef(({active:s,payload:t,className:i,indicator:a="dot",hideLabel:n=!1,hideIndicator:c=!1,label:o,labelFormatter:r,labelClassName:N,formatter:d,color:b,nameKey:v,labelKey:w},k)=>{const{config:m}=Ft(),T=x.useMemo(()=>{var F;if(n||!(t!=null&&t.length))return null;const[z]=t,A=`${w||z.dataKey||z.name||"value"}`,V=Ws(m,z,A),$=!w&&typeof o=="string"?((F=m[o])==null?void 0:F.label)||o:V==null?void 0:V.label;return r?e.jsx("div",{className:R("font-medium",N),children:r($,t)}):$?e.jsx("div",{className:R("font-medium",N),children:$}):null},[o,r,t,n,N,m,w]);if(!s||!(t!=null&&t.length))return null;const P=t.length===1&&a!=="dot";return e.jsxs("div",{ref:k,className:R("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",i),children:[P?null:T,e.jsx("div",{className:"grid gap-1.5",children:t.map((z,A)=>{const V=`${v||z.name||z.dataKey||"value"}`,$=Ws(m,z,V),F=b||z.payload.fill||z.color;return e.jsx("div",{className:R("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground",a==="dot"&&"items-center"),children:d&&(z==null?void 0:z.value)!==void 0&&z.name?d(z.value,z.name,z,A,z.payload):e.jsxs(e.Fragment,{children:[$!=null&&$.icon?e.jsx($.icon,{}):!c&&e.jsx("div",{className:R("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":a==="dot","w-1":a==="line","w-0 border-[1.5px] border-dashed bg-transparent":a==="dashed","my-0.5":P&&a==="dashed"}),style:{"--color-bg":F,"--color-border":F}}),e.jsxs("div",{className:R("flex flex-1 justify-between leading-none",P?"items-end":"items-center"),children:[e.jsxs("div",{className:"grid gap-1.5",children:[P?T:null,e.jsx("span",{className:"text-muted-foreground",children:($==null?void 0:$.label)||z.name})]}),z.value&&e.jsx("span",{className:"font-mono font-medium tabular-nums text-foreground",children:z.value.toLocaleString()})]})]})},z.dataKey)})})]})});Jt.displayName="ChartTooltip";const xr=x.forwardRef(({className:s,hideIcon:t=!1,payload:i,verticalAlign:a="bottom",nameKey:n},c)=>{const{config:o}=Ft();return i!=null&&i.length?e.jsx("div",{ref:c,className:R("flex items-center justify-center gap-4",a==="top"?"pb-3":"pt-3",s),children:i.map(r=>{const N=`${n||r.dataKey||"value"}`,d=Ws(o,r,N);return e.jsxs("div",{className:R("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[d!=null&&d.icon&&!t?e.jsx(d.icon,{}):e.jsx("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:r.color}}),d==null?void 0:d.label]},r.value)})}):null});xr.displayName="ChartLegend";function Ws(s,t,i){if(typeof t!="object"||t===null)return;const a="payload"in t&&typeof t.payload=="object"&&t.payload!==null?t.payload:void 0;let n=i;return i in t&&typeof t[i]=="string"?n=t[i]:a&&i in a&&typeof a[i]=="string"&&(n=a[i]),n in s?s[n]:s[i]}const hr=Qs("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function on({className:s,variant:t,...i}){return e.jsx("div",{className:R(hr({variant:t}),s),...i})}const ur={count:{label:"Player count",icon:en}};function mr(){const s=q(),{jobs:t}=le(),{onDutyCount:i,lastOnDutyCount:a,wealthiestJob:n,jobCounts:c}=Ct(),o=Object.entries(c).map(([r,N])=>{var d;return{name:((d=t.find(b=>b.name===r))==null?void 0:d.label)||r,count:N}}).filter(r=>r.count>0);return e.jsxs("div",{className:"space-y-6 h-full flex flex-col",children:[e.jsx("h1",{className:"text-xl font-bold",children:s.get("ui_dashboard")}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs(ye,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fs,{className:"text-sm font-medium",children:s.get("ui_total_jobs")}),e.jsx(en,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ve,{children:[e.jsx("div",{className:"text-lg font-bold",children:t.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:s.get("ui_create_jobs_description")})]})]}),e.jsxs(ye,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fs,{className:"text-sm font-medium",children:s.get("ui_on_duty_players")}),e.jsx(Za,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ve,{children:[e.jsx("div",{className:"text-lg font-bold",children:i}),e.jsxs(on,{variant:"outline",className:"text-xs mt-2 text-muted-foreground",children:[i>=a?`+${i-a}`:`${i-a}`," ",s.get("ui_last_hour")]})]})]}),e.jsxs(ye,{children:[e.jsxs(gs,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(fs,{className:"text-sm font-medium",children:s.get("ui_wealthiest_job")}),e.jsx(Wa,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ve,{children:[e.jsx("div",{className:"font-bold text-lg line-clamp-1",children:(n==null?void 0:n.label)||s.get("ui_no_big_earners_yet")}),e.jsxs(on,{variant:"outline",className:"text-xs mt-2 text-muted-foreground",children:[s.get("ui_account_balance"),": $",(n==null?void 0:n.balance.toLocaleString())||"0"]})]})]})]}),e.jsxs(ye,{className:"mt-6 grow overflow-hidden flex flex-col",children:[e.jsxs(gs,{children:[e.jsx(fs,{className:"text-lg",children:s.get("ui_popular_jobs")}),e.jsx(Ms,{children:s.get("ui_popular_jobs_description")})]}),e.jsxs(ve,{className:"p-0 grow relative",children:[e.jsx(qt,{config:ur,className:"h-72 w-full",children:e.jsxs(Ka,{data:o.sort((r,N)=>N.count-r.count).slice(0,10),margin:{top:20,right:30,left:5,bottom:20},children:[e.jsx(Xa,{vertical:!1}),e.jsx(Ya,{dataKey:"name",tickLine:!1,tickMargin:10,axisLine:!1}),e.jsx(Qa,{allowDecimals:!1,tickCount:5}),e.jsx(dr,{cursor:!1,wrapperClassName:"w-72",content:e.jsx(Jt,{hideLabel:!0})}),e.jsx(ei,{dataKey:"count",name:s.get("ui_player_count"),fill:"currentColor",radius:4,maxBarSize:80}),e.jsx(si,{})]})}),o.length===0&&e.jsx("p",{className:"text-center text-2xl text-muted-foreground absolute top-[40%] left-[48%] transform -translate-x-1/2 -translate-y-1/2",children:s.get("ui_no_data_available")})]})]})]})}const Y=x.forwardRef(({className:s,...t},i)=>e.jsx(et,{ref:i,className:R("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...t,children:e.jsx(ni,{className:R("flex items-center justify-center text-current"),children:e.jsx(Os,{className:"h-4 w-4"})})}));Y.displayName=et.displayName;const jr=G({name:H().min(1,"ui_error_required"),label:H().min(1,"ui_error_required"),type:H().optional(),defaultDuty:B().optional(),offDutyPay:B().optional(),whitelisted:B().optional(),canWash:B().optional(),webhook:H().url("ui_error_url").optional().or(ms(""))});function pr(){const s=q(),t=Ne(),{updateJob:i}=le(),{framework:a}=wt(),n=nn(),c=je({resolver:pe(jr),defaultValues:{...t,webhook:t&&n.jobs[t.name]||""}});function o(r){const N={...t,...r,webhook:void 0};i(N),c.reset(r),be.success(s.get("ui_job_updated")),r.webhook&&n.rawSet({globalWebhook:n.globalWebhook,settings:n.settings,jobs:{...n.jobs,[t.name]:r.webhook}}),ce("updateJobWebhook",{name:N.name,url:r.webhook})}return e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o),className:"space-y-8",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"name",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:s.get("ui_name")}),e.jsx(p,{children:e.jsx(y,{...r,disabled:!0})}),e.jsx(I,{children:s.get("ui_job_name_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:s.get("ui_label")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:s.get("ui_job_label_description")}),e.jsx(E,{})]})})]}),a==="qb-core"&&e.jsxs(e.Fragment,{children:[e.jsx(g,{control:c.control,name:"type",render:({field:r})=>e.jsxs(j,{className:"w-1/2 pr-2",children:[e.jsx(_,{children:s.get("ui_type")}),e.jsx(p,{children:e.jsx(y,{placeholder:"leo",...r})}),e.jsx(I,{children:s.get("ui_job_type_description")}),e.jsx(E,{})]})}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"defaultDuty",render:({field:r})=>e.jsxs(j,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:s.get("ui_default_duty")}),e.jsx(I,{children:s.get("ui_default_duty_description")})]})]})}),e.jsx(g,{control:c.control,name:"offDutyPay",render:({field:r})=>e.jsxs(j,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:s.get("ui_off_duty_pay")}),e.jsx(I,{children:s.get("ui_off_duty_pay_description")})]})]})})]})]}),a==="es_extended"&&e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"whitelisted",render:({field:r})=>e.jsxs(j,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:s.get("ui_whitelisted")}),e.jsx(I,{children:s.get("ui_whitelisted_description")})]})]})}),e.jsx(g,{control:c.control,name:"canWash",render:({field:r})=>e.jsxs(j,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:s.get("ui_can_wash")}),e.jsx(I,{children:s.get("ui_can_wash_description")})]})]})})]}),e.jsx(g,{control:c.control,name:"webhook",render:({field:r})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_webhook")}),e.jsx(p,{children:e.jsx(y,{placeholder:"https://discord.com/api/webhooks/...",...r})}),e.jsx(I,{children:s.get("ui_job_webhook_description")}),e.jsx(E,{})]})}),e.jsx(f,{type:"submit",disabled:!c.formState.isDirty,children:s.get("ui_save")})]})})}const Ut=_e.union([_e.string(),_e.number()]).transform(s=>{if(typeof s=="string"){const t=parseFloat(s);return isNaN(t)?void 0:t}if(typeof s=="number")return s}),O=Ut.pipe(_e.number()),xs=Ut.pipe(_e.number().min(0).optional()).optional(),gr=G({label:H().min(1,"ui_error_required"),salary:O,bossActions:B().default(!1).optional()}),dn={label:"",salary:0,bossActions:!1};function fr({isOpen:s,setIsOpen:t,editingGrade:i,onSubmit:a}){const n=q(),c=Ne(),o=je({resolver:pe(gr.refine(b=>!c.grades.some(v=>v.name!==(i==null?void 0:i.name)&&v.label===b.label),{message:"Grade label must be unique",path:["label"]})),defaultValues:i||dn});x.useEffect(()=>{o.reset(i||dn)},[i]);const r=o.formState.isDirty;function N(b){r&&a({...b,name:b.label.toLowerCase().replace(/ /g,"_")}),t(!1)}function d(b){t(b),o.reset()}return e.jsxs(ge,{open:s,onOpenChange:d,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>o.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_grade")]})}),e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_grade"):n.get("ui_add_grade")}),e.jsx(me,{})]}),e.jsx(fe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(N,Me),className:"space-y-4 py-4",children:[e.jsx(g,{control:o.control,name:"label",render:({field:b})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_grade_label")}),e.jsx(p,{children:e.jsx(y,{placeholder:n.get("ui_enter_grade_label"),...b})}),e.jsx(I,{children:n.get("ui_grade_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:o.control,name:"salary",render:({field:b})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_salary")}),e.jsx(p,{children:e.jsx(y,{type:"number",placeholder:n.get("ui_enter_salary"),...b})}),e.jsx(I,{children:n.get("ui_salary_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:o.control,name:"bossActions",render:({field:b})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 py-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:b.value,onCheckedChange:b.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_boss_actions_access")}),e.jsx(I,{children:n.get("ui_boss_actions_access_description")})]})]})}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_grade")})]})})]})]})}const Bt=hs(s=>({content:null,contentType:null,setCopiedContent:(t,i)=>s({content:t,contentType:i}),clearContent:()=>s({content:null,contentType:null})})),Oe=({onPaste:s,contentType:t,isDropdown:i})=>{const a=q(),{content:n,contentType:c}=Bt(),o=()=>{n&&c===t?(s(n),be.success(a.get("ui_pasted"))):be.error(a.get("ui_no_compatible_content"))};return i?e.jsxs(K,{onClick:o,children:[e.jsx(cn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Paste"})]}):e.jsx(f,{variant:"outline",size:"icon",onClick:o,children:e.jsx(cn,{className:"h-4 w-4"})})},ne=({getContent:s,contentType:t,isDropdown:i,text:a})=>{const n=q(),c=Bt(r=>r.setCopiedContent),o=()=>{const r=s();c(r,t),be.success(n.get("ui_copied"))};return i?e.jsxs(K,{onClick:o,children:[e.jsx(Zs,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:a||n.get("ui_copy")})]}):e.jsx(f,{variant:"outline",size:"icon",onClick:o,children:e.jsx(Zs,{className:"h-4 w-4"})})},Le=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(st,{ref:a,className:R("relative overflow-hidden",s),...i,children:[e.jsx(ti,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Ht,{}),e.jsx(ai,{})]}));Le.displayName=st.displayName;const Ht=x.forwardRef(({className:s,orientation:t="vertical",...i},a)=>e.jsx(nt,{ref:a,orientation:t,className:R("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...i,children:e.jsx(ii,{className:"relative flex-1 rounded-full bg-border"})}));Ht.displayName=nt.displayName;function _r({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function br({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function yr(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.grades)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),d=$e(),b=Ue(oe(ss),oe(es,{coordinateGetter:Qe})),v=P=>{o(P),setTimeout(()=>{P||N(null)},200)},w=P=>{i({...t,grades:P},"grades")},k=P=>{const z=[...a,...(Array.isArray(P)?P:[P]).map(A=>({...A}))];n(z),o(!1),w(z)},m=P=>{if(r){const z=a.map((A,V)=>V===a.findIndex($=>$===r)?P:A);n(z),o(!1),setTimeout(()=>{N(null)},500),w(z)}};function T(P){const{active:z,over:A}=P;if(z.id!==A.id){const V=a.findIndex(D=>D.label===z.id),$=a.findIndex(D=>D.label===A.id),F=ri(a,V,$);n(F),w(F)}}return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_grades")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_grades_description")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"grade",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"grade",onPaste:k,isDropdown:!0})]})]}),e.jsx(fr,{isOpen:c,editingGrade:r||void 0,setIsOpen:v,onSubmit:r?m:k})]})]}),e.jsx("div",{className:"grow overflow-hidden",children:e.jsx(Be,{sensors:b,collisionDetection:He,onDragEnd:T,modifiers:[Ge,Ze],children:e.jsx(Le,{className:"h-full",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-32"}),e.jsx(S,{className:"w-20",children:s.get("ui_id")}),e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_salary")}),e.jsx(S,{children:s.get("ui_boss_actions_access")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{className:"pb-20",children:e.jsx(We,{items:a.map(P=>P.label),strategy:Ke,children:a.map((P,z)=>e.jsxs(_r,{id:P.label,children:[e.jsx(br,{id:P.label}),e.jsx(C,{children:z}),e.jsx(C,{children:P.label}),e.jsxs(C,{children:["$",P.salary]}),e.jsx(C,{children:P.bossActions?s.get("ui_yes"):s.get("ui_no")}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(P),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>P,contentType:"grade",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await d(s.get("ui_delete_grade"),s.get("ui_delete_grade_description"))){const A=a.filter((V,$)=>$!==z);n(A),w(A)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},P.label))})})]})})})})]})}const tn=G({item:H().optional(),removeAfterUse:B().optional()});function Nr({isOpen:s,setOpen:t,action:i,updateAction:a}){const n=q(),c=je({resolver:pe(tn),defaultValues:{item:"",removeAfterUse:!1,...i}}),o=r=>{a(r),t(!1)};return e.jsx(ge,{open:s,onOpenChange:t,children:e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:n.get("ui_edit_action")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o),className:"space-y-4",children:[e.jsx(g,{control:c.control,name:"item",render:({field:r})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_item_name")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_enter_item_name")})]})}),e.jsx(g,{control:c.control,name:"removeAfterUse",render:({field:r})=>e.jsxs(j,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_remove_after_use")}),e.jsx(I,{children:n.get("ui_remove_after_use_description")})]})]})}),e.jsx(Js,{children:e.jsx(f,{type:"button",onClick:c.handleSubmit(o),className:"w-full",children:n.get("ui_save")})})]})})]})})}const Bs=hi,Hs=ui,zs=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(tt,{ref:a,className:R("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[t,e.jsx(li,{asChild:!0,children:e.jsx(Vs,{className:"h-4 w-4 opacity-50"})})]}));zs.displayName=tt.displayName;const Gt=x.forwardRef(({className:s,...t},i)=>e.jsx(at,{ref:i,className:R("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Qn,{className:"h-4 w-4"})}));Gt.displayName=at.displayName;const Zt=x.forwardRef(({className:s,...t},i)=>e.jsx(it,{ref:i,className:R("flex cursor-default items-center justify-center py-1",s),...t,children:e.jsx(Vs,{className:"h-4 w-4"})}));Zt.displayName=it.displayName;const Ts=x.forwardRef(({className:s,children:t,position:i="popper",...a},n)=>e.jsx(ci,{children:e.jsxs(rt,{ref:n,className:R("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:i,...a,children:[e.jsx(Gt,{}),e.jsx(oi,{className:R("p-1",i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Zt,{})]})}));Ts.displayName=rt.displayName;const vr=x.forwardRef(({className:s,...t},i)=>e.jsx(lt,{ref:i,className:R("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t}));vr.displayName=lt.displayName;const qe=x.forwardRef(({className:s,children:t,...i},a)=>e.jsxs(ct,{ref:a,className:R("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(di,{children:e.jsx(Os,{className:"h-4 w-4"})})}),e.jsx(xi,{children:t})]}));qe.displayName=ct.displayName;const wr=x.forwardRef(({className:s,...t},i)=>e.jsx(ot,{ref:i,className:R("-mx-1 my-1 h-px bg-muted",s),...t}));wr.displayName=ot.displayName;function Cr({isOpen:s,setOpen:t,initialValue:i,updateValue:a}){const n=q(),[c,o]=x.useState(i||"both"),r=()=>{a(c),t(!1)},N=()=>{o(i||"both"),t(!1)};return e.jsx(ge,{open:s,onOpenChange:N,children:e.jsxs(xe,{className:"w-96",children:[e.jsxs(he,{children:[e.jsx(ue,{children:n.get("ui_edit_handcuff_options")}),e.jsx(me,{})]}),e.jsxs(Bs,{value:c,onValueChange:d=>o(d),children:[e.jsx(zs,{className:"w-full",children:e.jsx(Hs,{placeholder:n.get("ui_select_handcuff_option")})}),e.jsxs(Ts,{children:[e.jsx(qe,{value:"both",children:n.get("ui_both")}),e.jsx(qe,{value:"handcuffs",children:n.get("ui_handcuffs")}),e.jsx(qe,{value:"zipties",children:n.get("ui_zipties")})]})]}),e.jsx(Js,{children:e.jsx(f,{type:"button",onClick:r,className:"w-full",children:n.get("ui_save")})})]})})}function te({name:s,label:t,description:i,control:a,isPrimitive:n}){const[c,o]=x.useState(!1),{field:r}=mi({name:s,control:a,defaultValue:!1}),N=typeof r.value=="object"||typeof r.value=="string";return e.jsx(g,{control:a,name:s,render:()=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 relative",style:{paddingRight:n?"2rem":"5rem"},children:[e.jsx(p,{children:e.jsx(Y,{type:"button",checked:N||r.value,onCheckedChange:d=>{r.onChange(d?n?!0:s==="playerActions.handcuff"?"both":{item:"",removeAfterUse:!1}:!1)}})}),e.jsxs("div",{className:"space-y-1 leading-none flex-grow",children:[e.jsx(_,{children:t}),e.jsx(I,{children:i})]}),!n&&e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>o(!0),disabled:!r.value,className:"ml-auto w-10 h-10 absolute right-2 top-2",children:e.jsx(Gs,{className:"h-4 w-4"})}),s==="playerActions.handcuff"?e.jsx(Cr,{isOpen:c,setOpen:o,initialValue:typeof r.value=="string"?r.value:"both",updateValue:d=>r.onChange(d)}):e.jsx(Nr,{isOpen:c,setOpen:o,action:r.value,updateAction:d=>r.onChange(d)})]})})}const ws=x.forwardRef(({className:s,orientation:t="horizontal",decorative:i=!0,...a},n)=>e.jsx(dt,{ref:n,decorative:i,orientation:t,className:R("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",s),...a}));ws.displayName=dt.displayName;const Ns=js([B(),tn]),kr=G({playerActions:G({steal:B(),handcuff:js([ms("both"),ms("handcuffs"),ms("zipties"),B()]),drag:B(),carry:B(),tackle:B(),bill:B(),revive:Ns,heal:Ns}),vehicleActions:G({putInsideVehicle:B(),takeOutOfVehicle:B(),hijack:Ns,repair:Ns,clean:Ns,impound:Ns})}),As={playerActions:{steal:!1,handcuff:!1,drag:!1,carry:!1,bill:!1,tackle:!1,revive:!1,heal:!1},vehicleActions:{putInsideVehicle:!1,takeOutOfVehicle:!1,hijack:!1,repair:!1,clean:!1,impound:!1}};function Sr(){const s=Ne(),t=q(),{updateJob:i}=le(),a=je({resolver:pe(kr),defaultValues:{playerActions:(s==null?void 0:s.playerActions)||As.playerActions,vehicleActions:(s==null?void 0:s.vehicleActions)||As.vehicleActions}});Array.isArray(a.watch("playerActions"))&&a.setValue("playerActions",As.playerActions),Array.isArray(a.watch("vehicleActions"))&&a.setValue("vehicleActions",As.vehicleActions);const n=c=>{i({...s,playerActions:c.playerActions,vehicleActions:c.vehicleActions}),be.success("Actions updated."),a.reset(c)};return e.jsx(fe,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(n),className:"space-y-8 overflow-y-scroll h-full px-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:t.get("ui_player_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.get("ui_player_actions_description")})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(te,{name:"playerActions.handcuff",label:t.get("ui_handcuff"),description:t.get("ui_handcuff_description"),control:a.control}),e.jsx(te,{name:"playerActions.drag",label:t.get("ui_drag"),description:t.get("ui_drag_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.steal",label:t.get("ui_steal"),description:t.get("ui_steal_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.carry",label:t.get("ui_carry"),description:t.get("ui_carry_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.tackle",label:t.get("ui_tackle"),description:t.get("ui_tackle_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.bill",label:t.get("ui_bill"),description:t.get("ui_bill_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.revive",label:t.get("ui_revive"),description:t.get("ui_revive_description"),control:a.control}),e.jsx(te,{name:"playerActions.heal",label:t.get("ui_heal"),description:t.get("ui_heal_description"),control:a.control})]}),e.jsx(ws,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:t.get("ui_vehicle_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.get("ui_vehicle_actions_description")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(te,{name:"vehicleActions.putInsideVehicle",label:t.get("ui_put_inside_vehicle"),description:t.get("ui_put_inside_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"vehicleActions.takeOutOfVehicle",label:t.get("ui_take_out_of_vehicle"),description:t.get("ui_take_out_of_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"vehicleActions.hijack",label:t.get("ui_hijack"),description:t.get("ui_hijack_description"),control:a.control}),e.jsx(te,{name:"vehicleActions.repair",label:t.get("ui_repair"),description:t.get("ui_repair_description"),control:a.control}),e.jsx(te,{name:"vehicleActions.clean",label:t.get("ui_clean"),description:t.get("ui_clean_description"),control:a.control}),e.jsx(te,{name:"vehicleActions.impound",label:t.get("ui_impound"),description:t.get("ui_impound_description"),control:a.control})]}),e.jsx(f,{type:"submit",disabled:!a.formState.isDirty,children:t.get("ui_save_actions")})]})})}function _s({name:s,label:t,description:i,is4D:a=!1,className:n,disableButton:c=!1,target:o=!1,forceDisableTarget:r=!1}){const{control:N,setValue:d,watch:b}=us(),v=ks(),w=async()=>{v.setVisible(!1);const m=await ce("getCoordsInput",{target:o,is4D:a,forceDisableTarget:r},{x:10,y:-10,z:20,w:10},500);v.setVisible(!0),d(s,m)},k=async()=>{v.setVisible(!1);const m=b(s);await ce("teleport",m)};return e.jsxs(j,{className:n,children:[e.jsx(_,{children:t}),e.jsx(p,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex gap-2",children:[["x","y","z",...a?["w"]:[]].map(m=>e.jsx(g,{control:N,name:`${s}.${m}`,render:({field:T})=>e.jsx(j,{className:"w-full",children:e.jsx(p,{children:e.jsx(y,{type:"number",placeholder:m.toUpperCase(),...T,value:T.value})})})},m)),!c&&e.jsxs(e.Fragment,{children:[e.jsx(f,{onClick:w,type:"button",size:"icon",className:"shrink-0",children:e.jsx(Ss,{className:"w-4 h-4"})}),e.jsx(f,{onClick:k,type:"button",size:"icon",className:"shrink-0",children:e.jsx(ys,{className:"w-4 h-4"})})]})]})})}),i&&e.jsx(I,{children:i})]})}const zr=G({coords:G({x:O,y:O,z:O}).catch({x:0,y:0,z:0}),name:H().min(1,"ui_error_required"),sprite:O,size:O,color:O,global:B().default(!1).optional()}),xn={coords:{x:0,y:0,z:0,w:0},name:"",sprite:0,size:1,color:0,global:!1};function Tr({isOpen:s,setIsOpen:t,editingBlip:i,onSubmit:a}){const n=q(),c=je({resolver:pe(zr),defaultValues:i||xn});x.useEffect(()=>{c.reset(i||xn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_blip")]})}),e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_blip"):n.get("ui_add_blip")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"space-y-4 py-4",children:[e.jsx(_s,{name:"coords",label:n.get("ui_coordinates"),forceDisableTarget:!0}),e.jsx(g,{control:c.control,name:"name",render:({field:r})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_blip_name")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_blip_name_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"sprite",render:({field:r})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_sprite")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_sprite_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"size",render:({field:r})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_size")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_size_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"color",render:({field:r})=>e.jsxs(j,{children:[e.jsx(_,{children:n.get("ui_color")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_color_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"global",render:({field:r})=>e.jsxs(j,{className:"flex-1 flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_blip")})]})]})}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_blip")})]})})]})]})}function Ir(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.blips)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,blips:l},"blips")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h})).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map(h=>h===r?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>l.name.toLowerCase().includes(m.toLowerCase())),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_blips"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"blip",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"blip",onPaste:A,isDropdown:!0})]})]}),e.jsx(Tr,{isOpen:c,editingBlip:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_name")}),e.jsx(S,{children:s.get("ui_sprite")}),e.jsx(S,{children:s.get("ui_size")}),e.jsx(S,{children:s.get("ui_color")}),e.jsx(S,{children:s.get("ui_global")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{children:e.jsx(C,{colSpan:6,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.name}),e.jsx(C,{children:l.sprite}),e.jsx(C,{children:l.size}),e.jsx(C,{children:l.color}),e.jsx(C,{children:l.global?s.get("ui_yes"):s.get("ui_no")}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"blip",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_blip"),s.get("ui_delete_blip_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}function hn({...s}){return e.jsx(y,{type:"number",...s,className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none"})}const $r=G({model:js([Cs.number().refine(s=>s!==0),H().min(1,"ui_error_required")]).catch("hei_prop_heist_wooden_box"),offset:G({x:O.catch(0),y:O.catch(0),z:O.catch(0)}).catch({x:0,y:0,z:0}),rotation:G({x:O.catch(0),y:O.catch(0),z:O.catch(0)}).catch({x:0,y:0,z:0})}),as=Je($r);function Pr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Ar({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function is({name:s,control:t,className:i}){const a=q(),{watch:n,setValue:c}=us(),{fields:o,append:r,remove:N,move:d}=ns({name:s,control:t}),b=n("props");if(b)for(let k=0;k<b.length;k++)Array.isArray(b[k])&&c(`props.${k}`,{model:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}});const v=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function w(k){const{active:m,over:T}=k;if(m.id!==T.id){const P=o.findIndex(A=>A.id===m.id),z=o.findIndex(A=>A.id===T.id);d(P,z)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_props")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>r({model:"",offset:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}),className:"shrink-0",children:a.get("ui_add_prop")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96",children:e.jsx(Be,{sensors:v,collisionDetection:He,onDragEnd:w,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{className:"w-52",children:a.get("ui_model")}),e.jsx(S,{children:a.get("ui_offset_x")}),e.jsx(S,{children:a.get("ui_offset_y")}),e.jsx(S,{children:a.get("ui_offset_z")}),e.jsx(S,{children:a.get("ui_rotation_x")}),e.jsx(S,{children:a.get("ui_rotation_y")}),e.jsx(S,{children:a.get("ui_rotation_z")}),e.jsx(S,{className:"w-20 text-center",children:a.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:o.map(k=>k.id),strategy:Ke,children:o.map((k,m)=>e.jsxs(Pr,{id:k.id,children:[e.jsx(Ar,{id:k.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${m}.model`,control:t,render:({field:T})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...T,placeholder:a.get("ui_prop_model")})})})})}),["x","y","z"].map(T=>e.jsx(C,{className:"p-3",children:e.jsx(g,{name:`${s}.${m}.offset.${T}`,control:t,render:({field:P})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(hn,{...P,placeholder:T.toUpperCase(),step:"0.01"})})})})},T)),["x","y","z"].map(T=>e.jsx(C,{className:"p-3",children:e.jsx(g,{name:`${s}.${m}.rotation.${T}`,control:t,render:({field:P})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(hn,{...P,placeholder:`Rot ${T.toUpperCase()}`,step:"0.01"})})})})},`rot_${T}`)),e.jsx(C,{className:"flex justify-center",children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(m),children:e.jsx(ts,{className:"h-4 w-4"})})})]},k.id))})})]})})})})})]})}const Dr=G({model:js([Cs.number().refine(s=>s!==0),H().min(1,"ui_error_required")]).catch("a_m_y_genstreet_01"),offset:G({x:O.catch(0),y:O.catch(0),z:O.catch(0)}).catch({x:0,y:0,z:0}),heading:O.catch(0)}),rs=Je(Dr);function Mr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Er({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function ls({name:s,control:t,className:i}){const a=q(),{watch:n,setValue:c}=us(),{fields:o,append:r,remove:N,move:d}=ns({name:s,control:t}),b=n("ped");if(b)for(let k=0;k<b.length;k++)Array.isArray(b[k])&&c(`ped.${k}`,{model:"",offset:{x:0,y:0,z:0},heading:0});const v=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function w(k){const{active:m,over:T}=k;if(m.id!==T.id){const P=o.findIndex(A=>A.id===m.id),z=o.findIndex(A=>A.id===T.id);d(P,z)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_peds")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>r({model:"",offset:{x:0,y:0,z:0},heading:0}),className:"shrink-0",children:a.get("ui_add_ped")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 overflow-x-hidden",children:e.jsx(Be,{sensors:v,collisionDetection:He,onDragEnd:w,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{className:"w-40",children:a.get("ui_model")}),e.jsx(S,{children:a.get("ui_offset_x")}),e.jsx(S,{children:a.get("ui_offset_y")}),e.jsx(S,{children:a.get("ui_offset_z")}),e.jsx(S,{children:a.get("ui_heading")}),e.jsx(S,{className:"w-24 text-center",children:a.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:o.map(k=>k.id),strategy:Ke,children:o.map((k,m)=>e.jsxs(Mr,{id:k.id,children:[e.jsx(Er,{id:k.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${m}.model`,control:t,render:({field:T})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...T,placeholder:"Ped model"})})})})}),["x","y","z"].map(T=>e.jsx(C,{className:"p-2",children:e.jsx(g,{name:`${s}.${m}.offset.${T}`,control:t,render:({field:P})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...P,type:"number",defaultValue:0,placeholder:T.toUpperCase(),step:"0.5"})})})})},T)),e.jsx(C,{children:e.jsx(g,{name:`${s}.${m}.heading`,control:t,render:({field:T})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...T,type:"number",defaultValue:0,placeholder:"Heading",step:"0.5"})})})})}),e.jsx(C,{className:"flex justify-center",children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(m),children:e.jsx(ts,{className:"h-4 w-4"})})})]},k.id))})})]})})})})})]})}const Ve=ji,Re=x.forwardRef(({className:s,...t},i)=>e.jsx(xt,{ref:i,className:R("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...t}));Re.displayName=xt.displayName;const J=x.forwardRef(({className:s,...t},i)=>e.jsx(ht,{ref:i,className:R("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...t}));J.displayName=ht.displayName;const U=x.forwardRef(({className:s,...t},i)=>e.jsx(ut,{ref:i,className:R("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...t}));U.displayName=ut.displayName;const Or=G({x:O.catch(0),y:O.catch(0),z:O.catch(0),w:O.catch(0)}),cs=Je(Or);function Rr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Vr({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function os({name:s,className:t}){const i=q(),{control:a,watch:n,setValue:c}=us(),{fields:o,append:r,remove:N,move:d}=ns({name:s,control:a}),b=ks();Array.isArray(n("locations"))||c("locations",[]);const v=n("target"),w=n("prop"),k=n("ped"),m=Ue(oe(ss),oe(es,{coordinateGetter:Qe})),T=async A=>{b.setVisible(!1);const V=await ce("getCoordsInput",{target:v,prop:w,ped:k},{x:0,y:0,z:0,w:0},500);b.setVisible(!0),c(`${s}.${A}`,V)},P=async A=>{b.setVisible(!1);const V=n(`${s}.${A}`);await ce("teleport",V)};function z(A){const{active:V,over:$}=A;if(V.id!==$.id){const F=o.findIndex(W=>W.id===V.id),D=o.findIndex(W=>W.id===$.id);d(F,D)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",t),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:i.get("ui_locations")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>r({x:0,y:0,z:0,w:0}),className:"shrink-0",children:i.get("ui_add_location")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96",children:e.jsx(Be,{sensors:m,collisionDetection:He,onDragEnd:z,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-8 px-2"}),e.jsx(S,{className:"w-[18%]",children:"X"}),e.jsx(S,{className:"w-[18%]",children:"Y"}),e.jsx(S,{className:"w-[18%]",children:"Z"}),e.jsx(S,{className:"w-[18%]",children:"W"}),e.jsx(S,{className:"w-[20%] text-center",children:i.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:o.map(A=>A.id),strategy:Ke,children:o.map((A,V)=>e.jsxs(Rr,{id:A.id,children:[e.jsx(Vr,{id:A.id}),["x","y","z","w"].map($=>e.jsx(C,{children:e.jsx(g,{name:`${s}.${V}.${$}`,control:a,render:({field:F})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...F,type:"number",placeholder:$.toUpperCase(),step:"0.1"})})})})},$)),e.jsx(C,{children:e.jsxs("div",{className:"flex justify-center space-x-2",children:[e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(V),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>P(V),children:e.jsx(ys,{className:"h-4 w-4"})}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(V),children:e.jsx(ts,{className:"h-4 w-4"})})]})})]},A.id))})})]})})})})})]})}const Fe=({name:s,description:t})=>{const i=q(),{control:a,formState:n}=us();return e.jsx(g,{control:a,name:s,render:({field:c})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:i.get("ui_interaction_style")}),e.jsxs(Bs,{onValueChange:o=>c.onChange(o==="true"?!0:o==="false"?!1:void 0),defaultValue:c.value===!0?"true":c.value===!1?"false":"undefined",children:[e.jsx(p,{children:e.jsx(zs,{children:e.jsx(Hs,{placeholder:"Select targeting option"})})}),e.jsxs(Ts,{children:[e.jsx(qe,{value:"true",children:i.get("ui_target")}),e.jsx(qe,{value:"false",children:i.get("ui_3d_prompts_or_text_ui")}),e.jsx(qe,{value:"undefined",children:i.get("ui_inherit_global")})]})]}),e.jsx(I,{children:t}),e.jsx(E,{})]})})},Lr=G({locations:cs,label:H().min(1),icon:H().min(1),radius:O,target:B().optional(),prop:as.optional(),ped:rs.optional()}),un={locations:[{x:0,y:0,z:0,w:0}],radius:1.25,icon:"briefcase",label:"",prop:[],ped:[]};function Fr({isOpen:s,setIsOpen:t,editingBossMenu:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Lr),defaultValues:i||un});x.useEffect(()=>{c.reset(i||un)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_boss_menu")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_boss_menu"):n.get("ui_add_boss_menu")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_boss_menu_placeholder")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_boss_menu")})]})})]})]})}function qr(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.bossMenus)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,bossMenus:l},"bossMenus")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return(u=l.icon)==null?void 0:u.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_boss_menus"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"bossMenu",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"bossMenu",onPaste:A,isDropdown:!0})]})]}),e.jsx(Fr,{isOpen:c,editingBossMenu:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_radius")}),e.jsx(S,{children:s.get("ui_target")}),e.jsx(S,{children:s.get("ui_locations")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{children:e.jsx(C,{colSpan:5,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.radius}),e.jsx(C,{children:l.target?s.get("ui_yes"):s.get("ui_no")}),e.jsx(C,{children:l.locations.length}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"bossMenu",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_boss_menu"),s.get("ui_delete_boss_menu_confirm"))){const h=a.filter((M,Z)=>Z!==u);n(h),z(h)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Jr=G({label:H().min(1),icon:H().min(1),locations:cs,radius:Cs.number().min(0,"ui_error_positive").optional(),target:B().optional(),prop:as.optional(),ped:rs.optional()}),mn={locations:[{x:0,y:0,z:0,w:0}],radius:2,label:"",icon:"shirt",prop:[],ped:[]};function Ur({isOpen:s,setIsOpen:t,editingCloakroom:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Jr),defaultValues:i||mn});x.useEffect(()=>{c.reset(i||mn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_cloakroom")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_cloakroom"):n.get("ui_add_cloakroom")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_cloakroom")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_cloakroom")})]})})]})]})}function Br(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.cloakrooms)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,cloakrooms:l},"cloakrooms")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>l.locations.some(u=>JSON.stringify(u).toLowerCase().includes(m.toLowerCase()))),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_cloakrooms"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"cloakroom",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"cloakroom",onPaste:A,isDropdown:!0})]})]}),e.jsx(Ur,{isOpen:c,editingCloakroom:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_radius")}),e.jsx(S,{children:s.get("ui_target")}),e.jsx(S,{children:s.get("ui_locations")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{children:e.jsx(C,{colSpan:5,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.radius}),e.jsx(C,{children:l.target?s.get("ui_yes"):s.get("ui_no")}),e.jsx(C,{children:l.locations.length}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"cloakroom",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_cloakroom"),s.get("ui_delete_cloakroom_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Hr=fi,Ks=x.forwardRef(({className:s,...t},i)=>e.jsx(pi,{ref:i,className:R("border-b",s),...t}));Ks.displayName="AccordionItem";const Xs=x.forwardRef(({className:s,children:t,...i},a)=>e.jsx(gi,{className:"flex",children:e.jsxs(mt,{ref:a,className:R("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...i,children:[t,e.jsx(Vs,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Xs.displayName=mt.displayName;const Ys=x.forwardRef(({className:s,children:t,...i},a)=>e.jsx(jt,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:e.jsx("div",{className:R("pb-4 pt-0",s),children:t})}));Ys.displayName=jt.displayName;const Is=_e.union([_e.object({scenario:_e.string().min(1,"ui_error_required"),playEnter:_e.boolean().optional()}),_e.object({dict:_e.string().min(1,"ui_error_required"),clip:_e.string().min(1,"ui_error_required"),flag:xs,blendIn:xs,blendOut:xs,duration:xs,playbackRate:xs,lockX:_e.boolean().optional(),lockY:_e.boolean().optional(),lockZ:_e.boolean().optional()})]),$s=_e.object({model:_e.union([_e.coerce.number(),_e.string()]).catch(void 0),bone:xs,position:_e.object({x:O,y:O,z:O}).catch({x:0,y:0,z:0}),rotation:_e.object({x:O,y:O,z:O}).catch({x:0,y:0,z:0})}).transform(s=>s.model!==void 0?s:void 0),Ps=({name:s,disableNone:t})=>{const i=q(),{control:a,watch:n,setValue:c}=us(),o=n(s),[r,N]=x.useState(o?"dict"in o?"animation":"scenario":"none");return x.useEffect(()=>{r==="none"?c(s,void 0):r==="scenario"&&(!o||!("scenario"in o))?c(s,{scenario:""}):r==="animation"&&(!o||!("dict"in o))&&c(s,{dict:"",clip:""})},[r,s,c]),e.jsxs("div",{className:"space-y-4",children:[e.jsx(g,{control:a,name:`${s}.type`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_animation_type")}),e.jsxs(Bs,{onValueChange:b=>{N(b)},value:r,children:[e.jsx(p,{children:e.jsx(zs,{children:e.jsx(Hs,{placeholder:i.get("ui_select_animation_type")})})}),e.jsxs(Ts,{children:[!t&&e.jsx(qe,{value:"none",children:i.get("ui_none")}),e.jsx(qe,{value:"scenario",children:i.get("ui_scenario")}),e.jsx(qe,{value:"animation",children:i.get("ui_animation")})]})]})]})}),r==="scenario"&&e.jsxs(e.Fragment,{children:[e.jsx(g,{control:a,name:`${s}.scenario`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_scenario")}),e.jsx(p,{children:e.jsx(y,{...d,placeholder:"WORLD_HUMAN_CLIPBOARD"})}),e.jsx(I,{children:i.get("ui_scenario_desc")})]})}),e.jsx(g,{control:a,name:`${s}.playEnter`,render:({field:d})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:d.value,onCheckedChange:d.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:i.get("ui_play_enter_animation")}),e.jsx(I,{children:i.get("ui_play_enter_animation_desc")})]})]})})]}),r==="animation"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:a,name:`${s}.dict`,render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:i.get("ui_animation_dict")}),e.jsx(p,{children:e.jsx(y,{...d,placeholder:"e.g. anim@amb@clubhouse@tutorial@bkr_tut_ig3@"})}),e.jsx(I,{children:i.get("ui_animation_dict_desc")})]})}),e.jsx(g,{control:a,name:`${s}.clip`,render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:i.get("ui_animation_clip")}),e.jsx(p,{children:e.jsx(y,{...d,placeholder:"machinic_loop_mechandplayer"})}),e.jsx(I,{children:i.get("ui_animation_clip_desc")})]})})]}),e.jsxs(Hr,{type:"single",collapsible:!0,children:[e.jsxs(Ks,{value:"advanced-settings",children:[e.jsx(Xs,{children:i.get("ui_advanced_settings")}),e.jsxs(Ys,{className:"space-y-4 mt-4 px-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(g,{control:a,name:`${s}.flag`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_flag")}),e.jsx(p,{children:e.jsx(y,{type:"number",...d})})]})}),e.jsx(g,{control:a,name:`${s}.blendIn`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_blend_in")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.1",...d})})]})}),e.jsx(g,{control:a,name:`${s}.blendOut`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_blend_out")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.1",...d})})]})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(g,{control:a,name:`${s}.duration`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_duration")}),e.jsx(p,{children:e.jsx(y,{type:"number",...d})})]})}),e.jsx(g,{control:a,name:`${s}.playbackRate`,render:({field:d})=>e.jsxs(j,{children:[e.jsx(_,{children:i.get("ui_playback_rate")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.1",...d})})]})}),e.jsxs("div",{className:"flex space-x-4 items-center mt-6",children:[e.jsx(g,{control:a,name:`${s}.lockX`,render:({field:d})=>e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(p,{children:e.jsx(Y,{checked:d.value,onCheckedChange:d.onChange})}),e.jsx(_,{children:i.get("ui_lock_x")})]})}),e.jsx(g,{control:a,name:`${s}.lockY`,render:({field:d})=>e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(p,{children:e.jsx(Y,{checked:d.value,onCheckedChange:d.onChange})}),e.jsx(_,{children:i.get("ui_lock_y")})]})}),e.jsx(g,{control:a,name:`${s}.lockZ`,render:({field:d})=>e.jsxs(j,{className:"flex items-center space-x-2",children:[e.jsx(p,{children:e.jsx(Y,{checked:d.value,onCheckedChange:d.onChange})}),e.jsx(_,{children:i.get("ui_lock_z")})]})})]})]})]})]}),e.jsxs(Ks,{value:"animation-prop",children:[e.jsx(Xs,{children:i.get("ui_animation_prop")}),e.jsx(Ys,{className:"space-y-4 mt-4 px-4",children:e.jsx(Gr,{name:s})})]})]})]})]})},Gr=({name:s})=>{const t=q(),i=`${s}Prop`;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(g,{name:`${i}.model`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_model")}),e.jsx(p,{children:e.jsx(y,{...a,placeholder:"e.g. prop_cs_hand_radio"})}),e.jsx(I,{children:t.get("ui_model_desc")})]})}),e.jsx(g,{name:`${i}.bone`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_bone")}),e.jsx(p,{children:e.jsx(y,{type:"number",...a,placeholder:"e.g. 28422"})}),e.jsx(I,{children:t.get("ui_bone_desc")})]})})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-4",children:[e.jsx(g,{name:`${i}.position.x`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_offset_x")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.01",...a})})]})}),e.jsx(g,{name:`${i}.position.y`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_offset_y")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.01",...a})})]})}),e.jsx(g,{name:`${i}.position.z`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_offset_z")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.01",...a})})]})}),e.jsx(g,{name:`${i}.rotation.x`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_rotation_x")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.01",...a})})]})}),e.jsx(g,{name:`${i}.rotation.y`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_rotation_y")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.01",...a})})]})}),e.jsx(g,{name:`${i}.rotation.z`,render:({field:a})=>e.jsxs(j,{children:[e.jsx(_,{children:t.get("ui_rotation_z")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.01",...a})})]})})]})]})},Wt=Je(G({name:H().min(1),count:G({min:O.catch(1),max:O.catch(1)}).catch({min:1,max:1})}));function Zr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Wr({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function Kt({name:s,control:t,className:i}){const a=q(),{fields:n,append:c,remove:o,move:r}=ns({name:s,control:t}),N=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function d(b){const{active:v,over:w}=b;if(v.id!==w.id){const k=n.findIndex(T=>T.id===v.id),m=n.findIndex(T=>T.id===w.id);r(k,m)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_items")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>c({name:"",count:{min:1,max:1}}),className:"shrink-0",children:a.get("ui_add_item")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 overflow-x-hidden",children:e.jsx(Be,{sensors:N,collisionDetection:He,onDragEnd:d,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{children:a.get("ui_item_name")}),e.jsx(S,{children:a.get("ui_min_count")}),e.jsx(S,{children:a.get("ui_max_count")}),e.jsx(S,{className:"w-24 text-center",children:a.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:n.map(b=>b.id),strategy:Ke,children:n.map((b,v)=>e.jsxs(Zr,{id:b.id,children:[e.jsx(Wr,{id:b.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${v}.name`,control:t,render:({field:w})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...w,placeholder:a.get("ui_item_name")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${v}.count.min`,control:t,render:({field:w})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...w,type:"number",placeholder:a.get("ui_min")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${v}.count.max`,control:t,render:({field:w})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...w,type:"number",placeholder:a.get("ui_max")})})})})}),e.jsx(C,{className:"flex justify-center",children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>o(v),children:e.jsx(ts,{className:"h-4 w-4"})})})]},b.id))})})]})})})})})]})}const Kr=G({label:H().min(1),progress:H(),icon:H(),radius:O,duration:O,items:Wt,animation:Is.optional(),animationProp:$s.optional(),requiredItem:H().optional(),max:xs,recover:xs,target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:cs}),jn={label:"",progress:"Collecting...",requiredItem:"",icon:"hand",duration:2e3,radius:1.25,items:[{name:"",count:{min:1,max:1}}],locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Xr({isOpen:s,setIsOpen:t,editingCollecting:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Kr),defaultValues:i||jn});x.useEffect(()=>{c.reset(i||jn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_collecting_point")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_collecting_point"):n.get("ui_add_collecting_point")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-6",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"ped",children:n.get("ui_ped")}),e.jsx(J,{value:"prop",children:n.get("ui_prop")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_collecting_point")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_progress_text")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_progress_text_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_duration")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_duration_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"requiredItem",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_required_item")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_required_item_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"max",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_max_collectable")}),e.jsx(p,{children:e.jsx(y,{type:"number",min:1,...r})}),e.jsx(I,{children:n.get("ui_max_collectable_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"recover",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_recovery_time")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_recovery_time_description")}),e.jsx(E,{})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Kt,{name:"items",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx(Ps,{name:"animation"})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_collecting_point")})]})})]})]})}function Yr(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.collecting)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,collecting:l},"collecting")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return((u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase()))||l.progress.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_collecting"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"collecting",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"collecting",onPaste:A,isDropdown:!0})]})]}),e.jsx(Xr,{isOpen:c,editingCollecting:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_progress")}),e.jsx(S,{children:s.get("ui_duration")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.progress}),e.jsx(C,{children:l.duration}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"collecting",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_collecting_point"),s.get("ui_delete_collecting_point_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Xt=bi,Yt=yi,an=x.forwardRef(({className:s,align:t="center",sideOffset:i=4,...a},n)=>e.jsx(_i,{children:e.jsx(pt,{ref:n,align:t,sideOffset:i,className:R("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}));an.displayName=pt.displayName;function Qr({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function el({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function pn({name:s,control:t,className:i,label:a,description:n}){const c=q(),{fields:o,append:r,remove:N,move:d}=ns({name:s,control:t}),b=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function v(w){const{active:k,over:m}=w;if(k.id!==m.id){const T=o.findIndex(z=>z.id===k.id),P=o.findIndex(z=>z.id===m.id);d(T,P)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"my-4",children:[e.jsx(_,{children:a}),e.jsx(I,{children:n})]}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>r({name:"",count:1}),className:"shrink-0",children:c.get("ui_add_item")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-48 overflow-x-hidden",children:e.jsx(Be,{sensors:b,collisionDetection:He,onDragEnd:v,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{children:c.get("ui_item_name")}),e.jsx(S,{children:c.get("ui_count")}),e.jsx(S,{className:"w-24 text-center",children:c.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:o.map(w=>w.id),strategy:Ke,children:o.map((w,k)=>e.jsxs(Qr,{id:w.id,children:[e.jsx(el,{id:w.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.name`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,placeholder:c.get("ui_item_name_placeholder")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.count`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,type:"number",placeholder:c.get("ui_count")})})})})}),e.jsx(C,{className:"flex justify-center",children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>N(k),children:e.jsx(ts,{className:"h-4 w-4"})})})]},w.id))})})]})})})})})]})}const sl=G({blueprint:H().optional(),duration:O,progress:H().min(1).catch("Crafting..."),requiredItems:Je(G({name:H().min(1),count:O})).transform(s=>s.filter(t=>t.name!==""&&t.count>0)),giveItems:Je(G({name:H().min(1),count:O})).transform(s=>s.filter(t=>t.name!==""&&t.count>0))}),nl=Je(sl);function tl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function al({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function il({name:s,control:t,className:i}){const a=q(),{fields:n,append:c,remove:o,move:r}=ns({name:s,control:t}),N=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function d(b){const{active:v,over:w}=b;if(v.id!==w.id){const k=n.findIndex(T=>T.id===v.id),m=n.findIndex(T=>T.id===w.id);r(k,m)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_crafting_entries")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>c({label:"",blueprint:"",duration:1e4,progress:a.get("ui_crafting_progress"),requiredItems:[{name:"",count:1}],giveItems:[{name:"",count:1}]}),className:"shrink-0",children:a.get("ui_add_crafting_entry")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 overflow-x-hidden",children:e.jsx(Be,{sensors:N,collisionDetection:He,onDragEnd:d,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{children:a.get("ui_duration")}),e.jsx(S,{children:a.get("ui_progress")}),e.jsx(S,{children:a.get("ui_required_blueprint")}),e.jsx(S,{className:"w-36 text-center",children:a.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:n.map(b=>b.id),strategy:Ke,children:n.map((b,v)=>e.jsxs(tl,{id:b.id,children:[e.jsx(al,{id:b.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${v}.duration`,control:t,render:({field:w})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...w,type:"number",placeholder:"Duration"})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${v}.progress`,control:t,render:({field:w})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...w,placeholder:"Progress"})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${v}.blueprint`,control:t,render:({field:w})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...w,placeholder:"Blueprint"})})})})}),e.jsxs(C,{className:"flex justify-center gap-1",children:[e.jsxs(Xt,{children:[e.jsx(Yt,{asChild:!0,children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(Ni,{className:"h-4 w-4"})})}),e.jsx(an,{className:"w-[32rem] h-[25rem] rounded-xl",side:"left",children:e.jsxs(Ve,{defaultValue:"requiredItems",children:[e.jsxs(Re,{className:"grid w-full grid-cols-2",children:[e.jsx(J,{value:"requiredItems",children:a.get("ui_required_items")}),e.jsx(J,{value:"giveItems",children:a.get("ui_give_items")})]}),e.jsx(U,{value:"requiredItems",children:e.jsx(pn,{name:`${s}.${v}.requiredItems`,control:t,label:a.get("ui_required_items"),description:a.get("ui_required_items_description")})}),e.jsx(U,{value:"giveItems",children:e.jsx(pn,{name:`${s}.${v}.giveItems`,control:t,label:a.get("ui_give_items"),description:a.get("ui_give_items_description")})})]})})]}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>o(v),children:e.jsx(ts,{className:"h-4 w-4"})})]})]},b.id))})})]})})})})})]})}const rl=G({label:H().min(1,"ui_error_required"),grade:O,icon:H().min(1,"ui_error_required"),radius:O,entries:nl,animation:Is.optional(),animationProp:$s.optional(),target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:cs}),gn={icon:"screwdriver-wrench",radius:1.25,grade:0,entries:[{blueprint:"",duration:1e4,progress:"Crafting...",requiredItems:[],giveItems:[]}],locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function ll({isOpen:s,setIsOpen:t,editingCrafting:i,onSubmit:a}){const n=q(),c=je({resolver:pe(rl),defaultValues:i||gn});x.useEffect(()=>{c.reset(i||gn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_crafting_point")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_crafting_point"):n.get("ui_add_crafting_point")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-6",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"recipes",children:n.get("ui_recipes")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:"Crafting"})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_grade")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(E,{})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"recipes",className:"space-y-4 shrink-0 py-4",children:e.jsx(il,{name:"entries",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx(Ps,{name:"animation"})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_crafting_point")})]})})]})]})}function cl(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.crafting)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,crafting:l},"crafting")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_crafting"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"crafting",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"crafting",onPaste:A,isDropdown:!0})]})]}),e.jsx(ll,{isOpen:c,editingCrafting:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_grade")}),e.jsx(S,{children:s.get("ui_icon")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.grade||0}),e.jsx(C,{children:l.icon}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"crafting",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_crafting"),s.get("ui_delete_crafting_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Qt=x.forwardRef(({className:s,...t},i)=>e.jsx("textarea",{className:R("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:i,...t}));Qt.displayName="Textarea";function ol({value:s,onChange:t,placeholder:i,rows:a=5}){const n=q(),[c,o]=x.useState(""),[r,N]=x.useState(null),[d,b]=x.useState(!1),v=x.useRef(null);x.useEffect(()=>{d||o(JSON.stringify(s,null,2))},[s,d]);const w=T=>{const P=T.target.value;o(P);try{const z=JSON.parse(P);N(null),t(z)}catch{N(n.get("ui_invalid_json"))}},k=()=>{b(!0)},m=()=>{b(!1),v.current&&(v.current.value=JSON.stringify(JSON.parse(c),null,2))};return e.jsx("div",{className:"space-y-2",children:e.jsx(Qt,{id:"json-input",ref:v,value:c,onChange:w,onFocus:k,onBlur:m,placeholder:i||n.get("ui_enter_json"),rows:a,className:r?"border-red-500":""})})}function dl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function xl({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function hl({name:s,control:t,className:i,showPrice:a}){const n=q(),{fields:c,append:o,remove:r,move:N,update:d}=ns({name:s,control:t}),b=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function v(w){const{active:k,over:m}=w;if(k.id!==m.id){const T=c.findIndex(z=>z.id===k.id),P=c.findIndex(z=>z.id===m.id);N(T,P)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:n.get("ui_vehicles")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>o({model:"",label:"",price:0,grade:0,props:{}}),className:"shrink-0",children:n.get("ui_add_vehicle")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 overflow-x-hidden",children:e.jsx(Be,{sensors:b,collisionDetection:He,onDragEnd:v,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{children:n.get("ui_model")}),e.jsx(S,{children:n.get("ui_label")}),a&&e.jsx(S,{children:n.get("ui_price")}),e.jsx(S,{children:n.get("ui_grade")}),e.jsx(S,{className:"w-32 text-center",children:n.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:c.map(w=>w.id),strategy:Ke,children:c.map((w,k)=>e.jsxs(dl,{id:w.id,children:[e.jsx(xl,{id:w.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.model`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,placeholder:n.get("ui_model")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.label`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,placeholder:n.get("ui_label")})})})})}),a&&e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.price`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,type:"number",placeholder:n.get("ui_price")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.grade`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,type:"number",placeholder:n.get("ui_grade")})})})})}),e.jsxs(C,{className:"flex justify-center space-x-2",children:[e.jsxs(Xt,{children:[e.jsx(Yt,{asChild:!0,children:e.jsx(f,{type:"button",variant:"outline",size:"icon",children:e.jsx(vi,{className:"h-4 w-4"})})}),e.jsx(an,{className:"w-80",side:"left",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Vehicle Properties - JSON"}),e.jsx(g,{name:`${s}.${k}.props`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(ol,{placeholder:n.get("ui_enter_json_for_vehicle_props"),value:m.value,onChange:m.onChange,rows:10})})})})]})})]}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>r(k),children:e.jsx(ts,{className:"h-4 w-4"})})]})]},w.id))})})]})})})})})]})}function ul({id:s,children:t}){const{attributes:i,listeners:a,setNodeRef:n,transform:c,transition:o}=de({id:s}),r={transform:Xe.Transform.toString(c),transition:o};return e.jsx("div",{ref:n,style:r,children:t})}function ml({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx("div",{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move shrink-0"})})}function jl({name:s,control:t,className:i}){const a=q(),{setValue:n,watch:c}=us(),{fields:o,append:r,remove:N,move:d}=ns({name:s,control:t}),b=ks(),v=Ue(oe(ss),oe(es,{coordinateGetter:Qe})),w=c("target"),k=c("ped"),m=c("prop"),T=async(A,V)=>{b.setVisible(!1);const $=await ce("getCoordsInput",V==="spawnCoords"?{target:!1,forceDisableTarget:!0}:{target:w,ped:k,prop:m},{x:0,y:0,z:0,w:0},500);b.setVisible(!0),n(`${s}.${A}.${V}`,$)},P=async(A,V)=>{b.setVisible(!1);const $=c(`${s}.${A}.${V}`);await ce("teleport",$)};function z(A){const{active:V,over:$}=A;if(V.id!==$.id){const F=o.findIndex(W=>W.id===V.id),D=o.findIndex(W=>W.id===$.id);d(F,D)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_garage_locations")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>r({coords:{x:0,y:0,z:0,w:0},spawnCoords:{x:0,y:0,z:0,w:0}}),className:"shrink-0",children:a.get("ui_add_garage_location")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 pr-2",children:e.jsx(Be,{sensors:v,collisionDetection:He,onDragEnd:z,modifiers:[Ge,Ze],children:e.jsx(We,{items:o.map(A=>A.id),strategy:Ke,children:o.map((A,V)=>e.jsx(ul,{id:A.id,children:e.jsxs("div",{className:"flex items-center space-x-2 p-2 border-b",children:[e.jsx(ml,{id:A.id}),e.jsxs("div",{className:"flex-grow space-y-2 px-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(_,{className:"w-20 flex items-center",children:[a.get("ui_coords"),":"]}),e.jsx("div",{className:"flex-grow grid grid-cols-4 gap-2",children:["x","y","z","w"].map($=>e.jsx(g,{name:`${s}.${V}.coords.${$}`,control:t,render:({field:F})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...F,type:"number",placeholder:$.toUpperCase(),step:"0.01",className:"w-full"})})})},`coords.${$}`))}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(V,"coords"),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>P(V,"coords"),children:e.jsx(ys,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(_,{className:"w-20 flex items-center",children:[a.get("ui_spawn_coords"),":"]}),e.jsx("div",{className:"flex-grow grid grid-cols-4 gap-2",children:["x","y","z","w"].map($=>e.jsx(g,{name:`${s}.${V}.spawnCoords.${$}`,control:t,render:({field:F})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...F,type:"number",placeholder:$.toUpperCase(),step:"0.01",className:"w-full"})})})},`spawnCoords.${$}`))}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(V,"spawnCoords"),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>P(V,"spawnCoords"),children:e.jsx(ys,{className:"h-4 w-4"})})]})]}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(V),children:e.jsx(ts,{className:"h-4 w-4"})})]})},A.id))})})})})})]})}const pl=G({model:js([Cs.number(),H()]),label:H().optional(),price:O,grade:O.catch(0),props:wi(Ci()).optional()}),gl=G({coords:G({x:O.catch(0),y:O.catch(0),z:O.catch(0),w:O.catch(0)}),spawnCoords:G({x:O.catch(0),y:O.catch(0),z:O.catch(0),w:O.catch(0)})}),fl=G({label:H().min(1,"ui_error_required"),vehicleType:H().min(1,"ui_error_required"),type:ki(["normal","buy","temporary"]),shared:B().optional(),vehicles:Je(pl).transform(s=>s.filter(t=>t.model!==""&&t.model!==0)).optional(),radius:Cs.number().min(0,"ui_error_positive").optional(),saveRadius:O,target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:Je(gl)}),fn={icon:"warehouse",vehicleType:"car",type:"buy",shared:!1,radius:1.25,saveRadius:3,locations:[{coords:{x:0,y:0,z:0,w:0},spawnCoords:{x:0,y:0,z:0,w:0}}],vehicles:[],prop:[],ped:[]};function _l({isOpen:s,setIsOpen:t,editingGarage:i,onSubmit:a}){const n=q(),c=je({resolver:pe(fl),defaultValues:i||fn});x.useEffect(()=>{c.reset(i||fn)},[i]);function o(d){a(d),t(!1)}const r=c.watch("locations");if(r)for(let d=0;d<r.length;d++)Array.isArray(r[d])&&c.setValue(`locations.${d}`,{coords:{x:0,y:0,z:0,w:0},spawnCoords:{x:0,y:0,z:0,w:0}});const N=c.watch("vehicles");if(N)for(let d=0;d<N.length;d++)Array.isArray(N[d].props)&&c.setValue(`vehicles.${d}.props`,{});return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_garage")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_garage"):n.get("ui_add_garage")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-5",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"vehicles",children:n.get("ui_vehicles")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_label")}),e.jsx(p,{children:e.jsx(y,{...d})}),e.jsx(I,{children:n.get("ui_label_garage_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"vehicleType",render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_vehicle_type")}),e.jsx(p,{children:e.jsx(y,{...d})}),e.jsx(I,{children:n.get("ui_vehicle_type_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"type",render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_type")}),e.jsxs(Bs,{onValueChange:d.onChange,defaultValue:d.value,children:[e.jsx(p,{children:e.jsx(zs,{children:e.jsx(Hs,{placeholder:"Select a garage type"})})}),e.jsxs(Ts,{children:[e.jsx(qe,{value:"normal",children:"Normal"}),e.jsx(qe,{value:"buy",children:"Buy"}),e.jsx(qe,{value:"temporary",children:"Temporary"})]})]}),e.jsx(I,{children:n.get("ui_type_garage_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...d})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(g,{control:c.control,name:"saveRadius",render:({field:d})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_save_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",...d})}),e.jsx(I,{children:n.get("ui_save_radius_description")}),e.jsx(E,{})]})})}),c.watch("type")!=="temporary"&&e.jsx(g,{control:c.control,name:"shared",render:({field:d})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:d.value,onCheckedChange:d.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_shared")}),e.jsx(I,{children:n.get("ui_shared_garage_description")})]})]})}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"vehicles",className:"space-y-4 shrink-0 py-4",children:e.jsx(hl,{name:"vehicles",control:c.control,showPrice:c.watch("type")==="buy"})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(jl,{name:"locations",control:c.control})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_garage")})]})})]})]})}function bl(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.garages)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,garages:l},"garages")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>l.label.toLowerCase().includes(m.toLowerCase())||l.vehicleType.toLowerCase().includes(m.toLowerCase())),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_garages"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"garage",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"garage",onPaste:A,isDropdown:!0})]})]}),e.jsx(_l,{isOpen:c,editingGarage:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_vehicle_type")}),e.jsx(S,{children:s.get("ui_type")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.vehicleType}),e.jsx(C,{children:l.type}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"garage",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_garage"),s.get("ui_delete_garage_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const yl=G({name:H().min(1),price:G({min:O.catch(1),max:O.catch(1)}),currency:H().min(1).catch("money")}),Nl=Je(yl);function vl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function wl({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function Cl({name:s,control:t,className:i,isRandom:a=!1}){const n=q(),{fields:c,append:o,remove:r,move:N}=ns({name:s,control:t}),d=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function b(w){const{active:k,over:m}=w;if(k.id!==m.id){const T=c.findIndex(z=>z.id===k.id),P=c.findIndex(z=>z.id===m.id);N(T,P)}}function v(w){r(w)}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:n.get("ui_sell_items")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>o({name:"",price:{min:1,max:1},currency:"",icon:""}),className:"shrink-0",children:n.get("ui_add_sell_item")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 overflow-x-hidden",children:e.jsx(Be,{sensors:d,collisionDetection:He,onDragEnd:b,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{children:n.get("ui_item_name")}),e.jsx(S,{children:n.get("ui_min_price")}),e.jsx(S,{children:n.get("ui_max_price")}),e.jsx(S,{children:n.get("ui_currency")}),e.jsx(S,{className:"w-24 text-center",children:n.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:c.map(w=>w.id),strategy:Ke,children:c.map((w,k)=>e.jsxs(vl,{id:w.id,children:[e.jsx(wl,{id:w.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.name`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,placeholder:n.get("ui_item_name")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.price.min`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,type:"number",placeholder:n.get("ui_min_price")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.price.max`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,type:"number",placeholder:n.get("ui_max_price")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${k}.currency`,control:t,render:({field:m})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...m,placeholder:n.get("ui_currency")})})})})}),e.jsx(C,{className:"flex justify-center",children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>v(k),children:e.jsx(ts,{className:"h-4 w-4"})})})]},w.id))})})]})})})})})]})}const kl=G({label:H().min(1,"ui_error_required"),progress:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),radius:O,grade:O,animation:Is.optional(),animationProp:$s.optional(),duration:O,sellAtOnce:B(),items:Nl,employeePercentage:O,target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:cs}),_n={duration:2e3,radius:1.25,grade:0,icon:"dollar-sign",sellAtOnce:!1,items:[{name:"",price:{min:1,max:1},currency:"society"}],locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Sl({isOpen:s,setIsOpen:t,editingSelling:i,onSubmit:a}){const n=q(),c=je({resolver:pe(kl),defaultValues:i||_n});x.useEffect(()=>{c.reset(i||_n)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_selling_point")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_selling_point"):n.get("ui_add_selling_point")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-6",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_sell")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_progress_text")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_selling_progress")})}),e.jsx(I,{children:n.get("ui_progress_text_selling")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_duration")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_duration_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_grade")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(E,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(g,{control:c.control,name:"employeePercentage",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_employee_percentage")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_employee_percentage_description")}),e.jsx(E,{})]})})}),e.jsx(g,{control:c.control,name:"sellAtOnce",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_sell_at_once")}),e.jsx(I,{children:n.get("ui_sell_at_once_description")})]})]})}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Cl,{name:"items",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx(Ps,{name:"animation"})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_selling_point")})]})})]})]})}function zl(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.selling)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,selling:l},"selling")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return((u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase()))||l.progress.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_selling_points"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"selling",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"selling",onPaste:A,isDropdown:!0})]})]}),e.jsx(Sl,{isOpen:c,editingSelling:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_progress")}),e.jsx(S,{children:s.get("ui_duration")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.progress}),e.jsx(C,{children:l.duration}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"selling",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_selling_point"),s.get("ui_delete_selling_point_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Tl=G({label:H().min(1),name:H().optional(),grade:O,shared:B().optional(),icon:H().optional(),slots:O,maxWeight:O,global:B().optional(),radius:O,target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:cs}),bn={label:"",icon:"boxes",shared:!1,radius:1.25,slots:90,maxWeight:12e4,locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Il({isOpen:s,setIsOpen:t,editingStash:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Tl),defaultValues:i||bn});x.useEffect(()=>{c.reset(i||bn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_stash")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_stash"):n.get("ui_add_stash")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_stash")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"name",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_name")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_stash_name_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"slots",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_slots")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_slots_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"maxWeight",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_max_weight")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_max_weight_description")}),e.jsx(E,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(g,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_grade")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(E,{})]})})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{control:c.control,name:"shared",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 w-1/2",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_shared")}),e.jsx(I,{children:n.get("ui_shared_stash_description")})]})]})}),e.jsx(g,{control:c.control,name:"global",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4 w-1/2",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_stash_description")})]})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_stash")})]})})]})]})}function $l(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.stashes)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,stashes:l},"stashes")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},200),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return l.label.toLowerCase().includes(m.toLowerCase())||((u=l.name)==null?void 0:u.toLowerCase().includes(m.toLowerCase()))}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_stashes"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"stash",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"stash",onPaste:A,isDropdown:!0})]})]}),e.jsx(Il,{isOpen:c,editingStash:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_name")}),e.jsx(S,{children:s.get("ui_slots")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.name||`${t.name}_stash_${u}`}),e.jsx(C,{children:l.slots}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"stash",isDropdown:!0,text:s.get("ui_copy")}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_stash"),s.get("ui_delete_stash_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Pl=G({from:G({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),target:G({x:ke(),y:ke(),z:ke()}),coords:G({x:ke(),y:ke(),z:ke(),w:ke()})}),to:G({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),target:G({x:ke(),y:ke(),z:ke()}),coords:G({x:ke(),y:ke(),z:ke(),w:ke()})}),disableAnim:B().optional(),routingBucket:O,radius:O,grade:O,target:B().optional()}),Al={radius:1.25,grade:0,from:{label:"Go inside",icon:"door-open",target:{x:0,y:0,z:0},coords:{x:0,y:0,z:0,w:0}},to:{label:"Go outside",icon:"door-closed",target:{x:0,y:0,z:0},coords:{x:0,y:0,z:0,w:0}}};function Dl({isOpen:s,setIsOpen:t,editingTeleport:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Pl),defaultValues:i||Al});x.useEffect(()=>{i&&c.reset(i)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_teleport")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_teleport"):n.get("ui_add_teleport")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"routingBucket",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_routing_bucket")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_routing_bucket_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_grade")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(E,{})]})}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(g,{control:c.control,name:"disableAnim",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_disable_animation")}),e.jsx(I,{children:n.get("ui_disable_animation_description")})]})]})}),e.jsxs("div",{className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"from.label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_from_label")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_from_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"from.icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_from_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_from_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(_s,{name:"from.target",label:n.get("ui_target_point"),className:"w-1/2"}),e.jsx(_s,{name:"from.coords",label:n.get("ui_coords_point"),is4D:!0,forceDisableTarget:!0,className:"w-1/2"})]})]}),e.jsxs("div",{className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"to.label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_to_label")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_to_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"to.icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_to_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_to_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(_s,{name:"to.target",label:n.get("ui_target_point"),className:"w-1/2"}),e.jsx(_s,{name:"to.coords",label:n.get("ui_coords_point"),is4D:!0,forceDisableTarget:!0,className:"w-1/2"})]})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_teleport")})]})})]})]})}function Ml(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.teleports)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,teleports:l},"teleports")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u,h;return((u=l.from.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase()))||((h=l.to.label)==null?void 0:h.toLowerCase().includes(m.toLowerCase()))}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_teleports"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"teleport",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"teleport",onPaste:A,isDropdown:!0})]})]}),e.jsx(Dl,{isOpen:c,editingTeleport:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_from")}),e.jsx(S,{children:s.get("ui_to")}),e.jsx(S,{children:s.get("ui_radius")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.from.label}),e.jsx(C,{children:l.to.label}),e.jsx(C,{children:l.radius}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"teleport",isDropdown:!0,text:s.get("ui_copy")}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_teleport"),s.get("ui_delete_teleport_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const El=G({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),radius:O,target:B().optional(),soundDistance:xs,prop:as.optional(),ped:rs.optional(),locations:cs}),yn={label:"",icon:"music",radius:1.25,soundDistance:20,prop:[],ped:[],locations:[{x:0,y:0,z:0,w:0}]};function Ol({isOpen:s,setIsOpen:t,editingMusicPlayer:i,onSubmit:a}){const n=q(),c=je({resolver:pe(El),defaultValues:i||yn});x.useEffect(()=>{c.reset(i||yn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_music_player")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_music_player"):n.get("ui_add_music_player")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_play_music")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"soundDistance",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_sound_distance")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_sound_distance_description")}),e.jsx(E,{})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_music_player")})]})})]})]})}function Rl(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.musicPlayers)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,musicPlayers:l},"musicPlayers")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_music_players"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"musicPlayer",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"musicPlayer",onPaste:A,isDropdown:!0})]})]}),e.jsx(Ol,{isOpen:c,editingMusicPlayer:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_icon")}),e.jsx(S,{children:s.get("ui_sound_distance")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.icon}),e.jsx(C,{children:l.soundDistance}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"musicPlayer",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_music_player"),s.get("ui_delete_music_player_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Vl=G({label:H().min(1),icon:H().min(1),target:B().optional(),global:B().optional(),radius:O,cooldown:O,prop:as.optional(),ped:rs.optional(),locations:cs}),Nn={label:"",icon:"bell",cooldown:3e4,radius:1.25,locations:[{x:0,y:0,z:0,w:0}],global:!0,prop:[],ped:[]};function Ll({isOpen:s,setIsOpen:t,editingAlarm:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Vl),defaultValues:i||Nn});x.useEffect(()=>{c.reset(i||Nn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_alarm")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_alarm"):n.get("ui_add_alarm")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_alert_police")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"cooldown",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_cooldown")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_cooldown_description")}),e.jsx(E,{})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")}),e.jsx(g,{control:c.control,name:"global",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_alarm")})]})]})})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_alarm")})]})})]})]})}function Fl(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.alarms)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,alarms:l},"alarms")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_alarms"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"alarm",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"alarm",onPaste:A,isDropdown:!0})]})]}),e.jsx(Ll,{isOpen:c,editingAlarm:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_global")}),e.jsx(S,{children:s.get("ui_cooldown")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.global?s.get("ui_yes"):s.get("ui_no")}),e.jsx(C,{children:l.cooldown}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Edit"})]}),e.jsx(ne,{getContent:()=>l,contentType:"alarm",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_alarm"),s.get("ui_delete_alarm_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Delete"})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const ql=G({employeePercentage:O,radius:O,target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:cs}),vn={employeePercentage:10,radius:1.25,icon:"cash-register",prop:[],ped:[],locations:[{x:0,y:0,z:0,w:0}]};function Jl({isOpen:s,setIsOpen:t,editingRegister:i,onSubmit:a}){const n=q(),c=je({resolver:pe(ql),defaultValues:i||vn});x.useEffect(()=>{c.reset(i||vn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_register")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_register"):n.get("ui_add_register")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_peds")}),e.jsx(J,{value:"prop",children:n.get("ui_props")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"employeePercentage",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_employee_percentage")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_employee_percentage_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_register")})]})})]})]})}function Ul(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.registers)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,registers:l},"registers")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>l.employeePercentage.toString().includes(m.toLowerCase())),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_registers"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"register",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"register",onPaste:A,isDropdown:!0})]})]}),e.jsx(Jl,{isOpen:c,editingRegister:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_employee_percentage")}),e.jsx(S,{children:s.get("ui_radius")}),e.jsx(S,{children:s.get("ui_target")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.employeePercentage}),e.jsx(C,{children:l.radius}),e.jsx(C,{children:l.target?s.get("ui_yes"):s.get("ui_no")}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"register",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_register"),s.get("ui_delete_register_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const Bl=G({label:H().min(1,"ui_error_required"),stop:H().optional(),icon:H().min(1,"ui_error_required"),radius:O,target:B().optional(),duration:xs,progress:H().optional(),notify:H().optional(),animation:Is,animationProp:$s.optional(),checkOccupied:B(),move:B().optional(),back:B().optional(),disableFreeze:B().optional(),global:B(),offset:G({x:ke().catch(0),y:ke().catch(0),z:ke().catch(0)}).catch({x:0,y:0,z:0}),locations:cs}).refine(s=>s.duration===void 0&&s.stop&&s.stop.length>0||s.duration!==void 0&&(!s.stop||s.stop.length===0),{message:"ui_error_duration_or_stop",path:["stop"]}),wn={label:"",icon:"",stop:"",progress:"",notify:"",radius:1.25,checkOccupied:!1,global:!1,animation:{clip:""},locations:[{x:0,y:0,z:0,w:0}],offset:{x:0,y:0,z:0}};function Hl({isOpen:s,setIsOpen:t,editingAnimationZone:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Bl),defaultValues:i||wn});x.useEffect(()=>{c.reset(i||wn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_animation_zone")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_animation_zone"):n.get("ui_add_animation_zone")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"advanced",children:n.get("ui_advanced")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"stop",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_stop_text")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_stop_text_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_duration")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_duration_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_progress_text")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_progress_text_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"notify",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_notify_text")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_notify_text_description")}),e.jsx(E,{})]})}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]})]}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx(Ps,{name:"animation",disableNone:!0})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})}),e.jsxs(U,{value:"advanced",className:"space-y-4 shrink-0 py-4",children:[e.jsx(g,{control:c.control,name:"checkOccupied",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_check_occupied")}),e.jsx(I,{children:n.get("ui_check_occupied_description")})]})]})}),e.jsx(g,{control:c.control,name:"move",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_move")}),e.jsx(I,{children:n.get("ui_move_description")})]})]})}),e.jsx(g,{control:c.control,name:"back",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_back")}),e.jsx(I,{children:n.get("ui_back_description")})]})]})}),e.jsx(g,{control:c.control,name:"disableFreeze",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_disable_freeze")}),e.jsx(I,{children:n.get("ui_disable_freeze_description")})]})]})}),e.jsx(g,{control:c.control,name:"global",render:({field:r})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:r.value,onCheckedChange:r.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:n.get("ui_global")}),e.jsx(I,{children:n.get("ui_global_animation_zone")})]})]})}),e.jsx(_s,{name:"offset",label:n.get("ui_offset"),disableButton:!0})]})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_animation_zone")})]})})]})]})}function Gl(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.animationZones)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,animationZones:l},"animationZones")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>l.label.toLowerCase().includes(m.toLowerCase())||l.icon.toLowerCase().includes(m.toLowerCase())),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_animation_zones"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"animationZone",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"animationZone",onPaste:A,isDropdown:!0})]})]}),e.jsx(Hl,{isOpen:c,editingAnimationZone:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_icon")}),e.jsx(S,{children:s.get("ui_duration")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.icon}),e.jsx(C,{children:l.duration||s.get("ui_infinite")}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"animationZone",isDropdown:!0,text:s.get("ui_copy")}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_animation_zone"),s.get("ui_delete_animation_zone_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}function Zl({id:s,children:t}){const{setNodeRef:i,transform:a,transition:n}=de({id:s}),c={transform:Xe.Transform.toString(a),transition:n};return e.jsx(L,{ref:i,style:c,children:t})}function Wl({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx(C,{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move"})})}function Kl({name:s,control:t,className:i}){const a=q(),{fields:n,append:c,remove:o,move:r}=ns({name:s,control:t}),N=Ue(oe(ss),oe(es,{coordinateGetter:Qe}));function d(v){const{active:w,over:k}=v;if(w.id!==k.id){const m=n.findIndex(P=>P.id===w.id),T=n.findIndex(P=>P.id===k.id);r(m,T)}}function b(v){o(v)}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_shop_items")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>c({name:"",price:0,currency:"",icon:"",grade:0}),className:"shrink-0",children:a.get("ui_add_shop_item")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 overflow-x-hidden",children:e.jsx(Be,{sensors:N,collisionDetection:He,onDragEnd:d,modifiers:[Ge,Ze],children:e.jsxs(ae,{className:"table-fixed h-full",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{className:"w-10"}),e.jsx(S,{children:a.get("ui_item_name")}),e.jsx(S,{children:a.get("ui_price")}),e.jsx(S,{children:a.get("ui_currency")}),e.jsx(S,{children:a.get("ui_grade")}),e.jsx(S,{className:"w-24 text-center",children:a.get("ui_actions")})]})}),e.jsx(re,{children:e.jsx(We,{items:n.map(v=>v.id),strategy:Ke,children:n.map((v,w)=>e.jsxs(Zl,{id:v.id,children:[e.jsx(Wl,{id:v.id}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${w}.name`,control:t,render:({field:k})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...k,placeholder:a.get("ui_item_name")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${w}.price`,control:t,render:({field:k})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...k,type:"number",placeholder:a.get("ui_price")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${w}.currency`,control:t,render:({field:k})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...k,placeholder:a.get("ui_currency")})})})})}),e.jsx(C,{children:e.jsx(g,{name:`${s}.${w}.grade`,control:t,render:({field:k})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...k,type:"number",placeholder:a.get("ui_grade")})})})})}),e.jsx(C,{className:"flex justify-center",children:e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500",onClick:()=>b(w),children:e.jsx(ts,{className:"h-4 w-4"})})})]},v.id))})})]})})})})})]})}const Xl=G({label:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),grade:O,items:Je(G({name:H(),price:O,currency:H().min(1).catch("money"),grade:O})).transform(s=>s.filter(t=>t.name.trim()!=="")),radius:O,target:B().optional(),prop:as.optional(),ped:rs.optional(),locations:cs}),Cn={icon:"basket-shopping",grade:0,items:[{name:"",price:1,currency:"",grade:0}],radius:1.25,locations:[{x:0,y:0,z:0,w:0}],prop:[],ped:[]};function Yl({isOpen:s,setIsOpen:t,editingShop:i,onSubmit:a}){const n=q(),c=je({resolver:pe(Xl),defaultValues:i||Cn});x.useEffect(()=>{c.reset(i||Cn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_shop")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_shop"):n.get("ui_add_shop")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[55rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-5",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"ped",children:n.get("ui_ped")}),e.jsx(J,{value:"prop",children:n.get("ui_prop")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_shop")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"grade",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_grade")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_grade_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Kl,{name:"items",control:c.control})}),e.jsx(U,{value:"ped",className:"space-y-4 shrink-0 py-4",children:e.jsx(ls,{name:"ped",control:c.control})}),e.jsx(U,{value:"prop",className:"space-y-4 shrink-0 py-4",children:e.jsx(is,{name:"prop",control:c.control})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(os,{name:"locations"})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_shop")})]})})]})]})}function Ql(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.shops)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,shops:l},"shops")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return(u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_shops"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"shop",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"shop",onPaste:A,isDropdown:!0})]})]}),e.jsx(Yl,{isOpen:c,editingShop:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_icon")}),e.jsx(S,{children:s.get("ui_grade")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.icon}),e.jsx(C,{children:l.grade}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"shop",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_shop"),s.get("ui_delete_shop_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const ec=G({globalWebhook:H().url("ui_error_url").or(ms("")),settings:G({alarms:B().optional(),collecting:B().optional(),crafting:B().optional(),vehicleBought:B().optional(),registers:B().optional(),selling:B().optional(),shops:B().optional(),stashes:B().optional()})});function sc(){const s=q(),t=nn(),i=je({resolver:pe(ec),defaultValues:{globalWebhook:t.globalWebhook||"",settings:{alarms:t.settings.alarms,collecting:t.settings.collecting,crafting:t.settings.crafting,vehicleBought:t.settings.vehicleBought,registers:t.settings.registers,selling:t.settings.selling,shops:t.settings.shops,stashes:t.settings.stashes}}}),a=async o=>{t.set(o),i.reset(o),be.success(s.get("ui_webhook_configuration_saved"))},{isDirty:n,isSubmitting:c}=i.formState;return e.jsx(fe,{...i,children:e.jsxs("form",{onSubmit:i.handleSubmit(a),className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_webhook_configuration")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_webhook_configuration_description")})]}),e.jsx(g,{control:i.control,name:"globalWebhook",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_global_webhook")}),e.jsx(p,{children:e.jsx(y,{placeholder:"https://discord.com/api/webhooks/...",...o})}),e.jsx(I,{children:s.get("ui_global_webhook_description")}),e.jsx(E,{})]})}),e.jsxs("div",{children:[e.jsx(_,{className:"text-s",children:s.get("ui_job_webhooks")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_job_webhooks_description")})]}),e.jsx(ws,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_logging_configuration")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_logging_configuration_description")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(g,{control:i.control,name:"settings.alarms",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_alarms")})]})}),e.jsx(g,{control:i.control,name:"settings.collecting",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_collecting")})]})}),e.jsx(g,{control:i.control,name:"settings.crafting",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_crafting")})]})}),e.jsx(g,{control:i.control,name:"settings.vehicleBought",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_vehicle_bought")})]})}),e.jsx(g,{control:i.control,name:"settings.registers",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_registers")})]})}),e.jsx(g,{control:i.control,name:"settings.selling",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_selling")})]})}),e.jsx(g,{control:i.control,name:"settings.shops",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_shops")})]})}),e.jsx(g,{control:i.control,name:"settings.stashes",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-center space-x-3 space-y-0",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsx(_,{className:"font-normal",children:s.get("ui_stashes")})]})})]}),e.jsxs(f,{type:"submit",disabled:!n||c,children:[c&&e.jsx(Rs,{className:"mr-2 h-4 w-4 animate-spin"}),s.get("ui_save_changes")]})]})})}const vs=js([B(),tn]),nc=G({interactDistance:O,impoundPrice:O,handcuffItems:B(),handcuffsItemName:H().optional(),ziptiesItemName:H().optional(),handcuffsSkillCheck:B(),sprintWhileDrag:B(),actionsMenu:B(),radialMenu:B(),disableTargetInteractions:B(),tackleRadius:O,tackleCooldown:O,playerActions:G({steal:B(),handcuff:js([ms("both"),ms("handcuffs"),ms("zipties"),B()]),drag:B(),carry:B(),bill:B(),revive:vs,heal:vs}),vehicleActions:G({putInsideVehicle:B(),takeOutOfVehicle:B(),hijack:vs,repair:vs,clean:vs,impound:vs}),durations:G({steal:O,revive:O,heal:O,hijack:O,repair:O,clean:O,impound:O})}).refine(s=>s.handcuffItems&&(!s.handcuffsItemName||!s.ziptiesItemName)?{handcuffsItemName:"handcuffs",ziptiesItemName:"zipties"}:!0,{message:"Handcuffs item name is required if handcuff items are enabled",path:["handcuffsItemName"]});function tc(){const s=q(),{settings:t,setSettings:i}=kt(),a=je({resolver:pe(nc),defaultValues:t}),n=Object.keys(a.formState.dirtyFields).length>0,c=o=>{i(o),ce("updateSettings",o),a.reset(o),be.success(s.get("ui_settings_saved"))};return e.jsx(fe,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(c),className:"space-y-8 overflow-y-scroll h-full pr-4 pl-2 -ml-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_settings")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_settings_description")})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(g,{control:a.control,name:"interactDistance",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_interact_distance")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...o})}),e.jsx(I,{children:s.get("ui_interact_distance_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"impoundPrice",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_impound_price")}),e.jsx(p,{children:e.jsx(y,{type:"number",...o,onChange:r=>o.onChange(parseInt(r.target.value))})}),e.jsx(I,{children:s.get("ui_impound_price_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"tackleRadius",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_tackle_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...o})}),e.jsx(I,{children:s.get("ui_tackle_radius_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"tackleCooldown",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_tackle_cooldown")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...o})}),e.jsx(I,{children:s.get("ui_tackle_cooldown_description")}),e.jsx(E,{})]})}),e.jsx("div",{className:"col-span-2",children:e.jsx(ye,{className:"p-4 bg-background",children:e.jsx(g,{control:a.control,name:"handcuffItems",render:({field:o})=>e.jsxs(j,{className:"space-y-3",children:[e.jsx(_,{children:s.get("ui_handcuff_items")}),e.jsx(p,{children:e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange,id:"handcuffItems"}),e.jsx("label",{htmlFor:"handcuffItems",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:s.get("ui_enable_handcuff_items")})]}),e.jsxs("div",{className:"flex gap-2 w-full",children:[e.jsx(g,{control:a.control,name:"handcuffsItemName",disabled:!o.value,render:({field:r})=>e.jsx(j,{className:"grow",children:e.jsx(p,{children:e.jsx(y,{...r,placeholder:s.get("ui_handcuffs_item_placeholder")})})})}),e.jsx(g,{control:a.control,name:"ziptiesItemName",disabled:!o.value,render:({field:r})=>e.jsx(j,{className:"grow",children:e.jsx(p,{children:e.jsx(y,{...r,placeholder:s.get("ui_zipties_item_placeholder")})})})})]})]})}),e.jsx(I,{children:s.get("ui_handcuff_items_description")}),e.jsx(E,{})]})})})}),e.jsx(g,{control:a.control,name:"handcuffsSkillCheck",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:s.get("ui_handcuffs_skill_check")}),e.jsx(I,{children:s.get("ui_handcuffs_skill_check_description")})]})]})}),e.jsx(g,{control:a.control,name:"sprintWhileDrag",render:({field:o})=>e.jsxs(j,{className:"flex flex-row items-start space-x-3 space-y-0 rounded-md border p-4",children:[e.jsx(p,{children:e.jsx(Y,{checked:o.value,onCheckedChange:o.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(_,{children:s.get("ui_sprint_while_drag")}),e.jsx(I,{children:s.get("ui_sprint_while_drag_description")})]})]})})]}),e.jsx(ws,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_global_player_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_global_player_actions_description")})]}),e.jsxs("div",{className:"flex gap-4 flex-wrap",children:[e.jsx(te,{name:"playerActions.handcuff",label:s.get("ui_handcuff"),description:s.get("ui_handcuff_description"),control:a.control}),e.jsx(te,{name:"playerActions.drag",label:s.get("ui_drag"),description:s.get("ui_drag_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.steal",label:s.get("ui_steal"),description:s.get("ui_steal_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.carry",label:s.get("ui_carry"),description:s.get("ui_carry_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.tackle",label:s.get("ui_tackle"),description:s.get("ui_tackle_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.bill",label:s.get("ui_bill"),description:s.get("ui_bill_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"playerActions.revive",label:s.get("ui_revive"),description:s.get("ui_revive_description"),control:a.control}),e.jsx(te,{name:"playerActions.heal",label:s.get("ui_heal"),description:s.get("ui_heal_description"),control:a.control})]}),e.jsx(ws,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_global_vehicle_actions")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_global_vehicle_actions_description")})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx(te,{name:"vehicleActions.putInsideVehicle",label:s.get("ui_put_inside_vehicle"),description:s.get("ui_put_inside_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"vehicleActions.takeOutOfVehicle",label:s.get("ui_take_out_of_vehicle"),description:s.get("ui_take_out_of_vehicle_description"),control:a.control,isPrimitive:!0}),e.jsx(te,{name:"vehicleActions.hijack",label:s.get("ui_hijack"),description:s.get("ui_hijack_description"),control:a.control}),e.jsx(te,{name:"vehicleActions.repair",label:s.get("ui_repair"),description:s.get("ui_repair_description"),control:a.control}),e.jsx(te,{name:"vehicleActions.clean",label:s.get("ui_clean"),description:s.get("ui_clean_description"),control:a.control}),e.jsx(te,{name:"vehicleActions.impound",label:s.get("ui_impound"),description:s.get("ui_impound_description"),control:a.control})]}),e.jsx(ws,{}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_action_durations")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_action_durations_description")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(g,{control:a.control,name:"durations.steal",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_steal")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"durations.revive",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_revive")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"durations.heal",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_heal")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"durations.hijack",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_hijack")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"durations.repair",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_repair")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"durations.clean",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_clean")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})}),e.jsx(g,{control:a.control,name:"durations.impound",render:({field:o})=>e.jsxs(j,{children:[e.jsx(_,{children:s.get("ui_impound")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:100,...o})}),e.jsx(E,{})]})})]}),e.jsx(f,{type:"submit",disabled:!n,children:s.get("ui_save_settings")})]})})}function ac(){const s=q();function t(a){const c=Date.now()-a*1e3,o=Math.floor(c/1e3),r=Math.floor(o/60),N=Math.floor(r/60),d=Math.floor(N/24),b=Math.floor(d/30),v=Math.floor(d/365);return o<60?o<=5?s.get("ui_just_now"):s.get(o===1?"ui_second_ago":"ui_seconds_ago",o):r<60?s.get(r===1?"ui_minute_ago":"ui_minutes_ago",r):N<24?s.get(N===1?"ui_hour_ago":"ui_hours_ago",N):d<30?s.get(d===1?"ui_day_ago":"ui_days_ago",d):b<12?s.get(b===1?"ui_month_ago":"ui_months_ago",b):s.get(v===1?"ui_year_ago":"ui_years_ago",v)}const{history:i}=vt();return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold",children:s.get("ui_history_title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_history_description")})]}),e.jsx(Le,{className:"grow",children:e.jsxs(ae,{children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_author")}),e.jsx(S,{children:s.get("ui_action")}),e.jsx(S,{children:s.get("ui_timestamp")})]})}),e.jsx(re,{children:i.sort((a,n)=>n.timestamp-a.timestamp).map((a,n)=>e.jsxs(L,{children:[e.jsx(C,{children:a.username}),e.jsx(C,{children:a.action}),e.jsx(C,{children:t(a.timestamp)})]},n))})]})})]})}function ic(){const s=q(),[t,i]=x.useState(""),[a,n]=x.useState(!1),[c,o]=x.useState(!1),{jobs:r,addJob:N}=le();x.useEffect(()=>{c&&i("")},[c]);const d=async()=>{if(!t.trim()){be.error(s.get("ui_please_enter_valid_code"));return}n(!0);try{const b=await fetch(`${bs.remoteUrl}/api/jobs/${t}/data`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!b.ok){be.error(s.get("ui_invalid_import_code"));return}const{data:v}=await b.json(),w=JSON.parse(v);if(r.find(k=>k.name===w.name)){be.error(s.get("ui_job_already_exists"));return}N(w),be.success(s.get("ui_job_imported_successfully")),i(""),o(!1)}catch{be.error(s.get("ui_failed_to_import_job"))}finally{n(!1)}};return e.jsxs(ge,{open:c,onOpenChange:o,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{children:[e.jsx(Ds,{className:"mr-2 w-4 h-4"}),s.get("ui_import_by_code")]})}),e.jsxs(xe,{children:[e.jsxs(he,{children:[e.jsx(ue,{children:s.get("ui_import_job")}),e.jsx(me,{children:s.get("ui_import_by_code_description")})]}),e.jsxs("div",{className:"flex flex-col space-y-4",children:[e.jsx(y,{placeholder:s.get("ui_enter_import_code"),value:t,onChange:b=>i(b.target.value)}),e.jsxs(f,{onClick:d,disabled:a,children:[a&&e.jsx(Rs,{className:"mr-2 w-4 h-4 animate-spin"}),s.get("ui_import")]})]})]})]})}const rc=Si,lc=zi,cc=Ti,ea=x.forwardRef(({className:s,sideOffset:t=4,...i},a)=>(x.useEffect(()=>{const n=document.querySelector("[data-radix-popper-content-wrapper]");n&&(n.style.position="absolute")},[]),e.jsx(gt,{ref:a,sideOffset:t,className:R("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...i})));ea.displayName=gt.displayName;function ps({className:s,...t}){return e.jsx("div",{className:R("animate-pulse rounded-md bg-muted",s),...t})}function oc({job:s,isOpen:t,onClose:i}){const a=q(),{jobs:n,addJob:c}=le(),[o,r]=x.useState(s),[N,d]=x.useState(!1),[b,v]=x.useState(!1);x.useEffect(()=>{if(r(s),s){async function m(){const P=await(await fetch(`${bs.remoteUrl}/api/jobs/${s._id}`)).json();r(P)}m()}},[s]);function w(m){navigator.clipboard.writeText(m),d(!0),be.success(a.get("ui_copied")),setTimeout(()=>d(!1),1e3)}const k=async()=>{v(!0);try{const m=await fetch(`${bs.remoteUrl}/api/jobs/${s._id}/data`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!m.ok){be.error(a.get("ui_invalid_import_code"));return}const{data:T}=await m.json(),P=JSON.parse(T);if(n.find(z=>z.name===P.name)){be.error(a.get("ui_job_already_exists"));return}c(P),be.success(a.get("ui_job_imported_successfully"))}catch{be.error(a.get("ui_failed_to_import_job"))}finally{v(!1)}};return e.jsx(ge,{open:t,onOpenChange:i,children:o&&e.jsxs(xe,{className:"max-w-4xl",children:[e.jsxs(he,{children:[e.jsx(ue,{className:"text-2xl",children:o.name}),e.jsx(me,{})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ii,{className:"w-5 h-5 mt-1 shrink-0 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Description"}),e.jsx("p",{className:"text-muted-foreground",children:o.description&&o.description.length>0?o.description:"No description provided"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ys,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Supported Maps"}),e.jsx("p",{className:"text-muted-foreground",children:o.requiredMaps})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ft,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Language"}),e.jsx("p",{className:"text-muted-foreground",children:o.language||"English"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Ds,{className:"w-5 h-5 mt-1 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-1",children:"Imported Count"}),e.jsx("p",{className:"text-muted-foreground",children:o.importedCount})]})]})]}),e.jsxs("div",{className:"mt-8 flex items-center justify-between border-b py-6",children:[e.jsxs("div",{className:"flex items-center text-sm",children:[e.jsxs(Ls,{className:"h-10 w-10 mr-4",children:[e.jsx(Fs,{src:o.authorAvatar,alt:o.author}),e.jsx(qs,{children:o.author.substring(0,2)})]}),e.jsx("div",{children:e.jsx("p",{className:"font-semibold",children:o.author})})]}),e.jsxs(f,{onClick:k,children:[b?e.jsx(Rs,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Ds,{className:"h-4 w-4 mr-2"}),a.get("ui_import")]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-bold mb-2",children:a.get("ui_job_items")}),e.jsx("p",{className:"text-muted-foreground mb-4 text-sm",children:a.get("ui_job_items_description")}),e.jsxs(Ve,{defaultValue:"esxItemsCode",className:"w-full",children:[e.jsxs(Re,{className:"mb-4",children:[e.jsx(J,{value:"esxItemsCode",children:"ESX"}),e.jsx(J,{value:"qbcoreItemsCode",children:"QBCore"}),e.jsx(J,{value:"oxInventoryItemsCode",children:"OX Inventory"})]}),["esxItemsCode","qbcoreItemsCode","oxInventoryItemsCode"].map(m=>{const T=o[m];return e.jsx(U,{value:m,children:e.jsxs("div",{className:"relative w-[50rem] ",children:[e.jsx("pre",{className:"bg-secondary p-4 rounded-md overflow-x-auto overflow-y-scroll h-64",children:e.jsx("code",{children:T})}),e.jsx(f,{className:"absolute top-2 right-4 w-8 h-8",size:"icon",onClick:()=>w(T),children:N?e.jsx(Os,{className:"h-4 w-4"}):e.jsx(Zs,{className:"h-4 w-4"})})]})},m)})]})]})]})]})})}function dc(){const s=q(),[t,i]=x.useState([]),[a,n]=x.useState(null),[c,o]=x.useState(!1),[r,N]=x.useState(!1),[d,b]=x.useState(!0),v=x.useMemo(()=>Date.now(),[]),w=x.useRef(null),k=x.useRef(null),m=x.useCallback(async()=>{if(!(r||!d)){N(!0);try{const T=t.length,P=await fetch(`${bs.remoteUrl}/api/jobs?lastIndex=${T}&lastLoadTime=${v}&limit=9`),{jobs:z,hasMore:A}=await P.json();i([...t,...z]),b(A)}catch(T){be.error(s.get("ui_error_fetching_jobs")),console.error("Error fetching jobs:",T)}finally{N(!1)}}},[t.length,r,d,v,s]);return x.useEffect(()=>{m()},[]),x.useEffect(()=>{if(!k.current)return;const T=()=>{k.current&&k.current.scrollTop+k.current.clientHeight>=k.current.scrollHeight/1.5&&d&&!r&&m()};return k.current.addEventListener("scroll",T),()=>{var P;return(P=k.current)==null?void 0:P.removeEventListener("scroll",T)}},[m,d,r]),e.jsxs("div",{className:"h-full flex flex-col overflow-y-hidden",children:[e.jsx(oc,{job:a,isOpen:c,onClose:()=>{o(!1),setTimeout(()=>n(null),400)}}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("p",{className:"text-lg font-bold",children:s.get("ui_community_jobs")}),e.jsx(rc,{children:e.jsxs(lc,{children:[e.jsx(cc,{children:e.jsx($i,{className:"w-4 h-4 ml-2 text-muted-foreground"})}),e.jsx(ea,{side:"right",children:e.jsx("p",{children:s.get("ui_community_jobs_tooltip")})})]})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.get("ui_community_jobs_description")})]}),e.jsx(ic,{})]}),e.jsx("div",{ref:k,className:"overflow-y-scroll grow pr-2",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mt-10",children:[t.map((T,P)=>e.jsxs(ye,{className:"flex flex-col justify-between",ref:P===t.length-1?w:null,children:[e.jsxs(gs,{children:[e.jsx(fs,{className:"text-base",children:T.name}),e.jsxs(Ms,{className:"text-sm space-y-1",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(ys,{className:"w-4 h-4 mr-2"}),T.requiredMaps]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(ft,{className:"w-4 h-4 mr-2"}),T.language||"English"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(Ds,{className:"w-4 h-4 mr-2"}),s.get("ui_imported",T.importedCount||0)]})]})]}),e.jsx(ve,{children:e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Ls,{className:"h-8 w-8 mr-2",children:[e.jsx(Fs,{src:T.authorAvatar,alt:T.author}),e.jsx(qs,{children:T.author.charAt(0)})]}),e.jsx("span",{className:"text-sm",children:T.author})]}),e.jsx(f,{size:"sm",onClick:()=>{n(T),setTimeout(()=>o(!0),50)},children:s.get("ui_view")})]})})]},T._id)),r&&Array.from({length:t.length===0?9:3}).map((T,P)=>e.jsxs(ye,{className:"flex flex-col justify-between",children:[e.jsxs(gs,{children:[e.jsx(fs,{className:"text-base",isDiv:!0,children:e.jsx(ps,{className:"h-6 w-3/4"})}),e.jsxs(Ms,{isDiv:!0,className:"text-sm space-y-1",children:[e.jsx(ps,{className:"h-4 w-1/2"}),e.jsx(ps,{className:"h-4 w-1/4"}),e.jsx(ps,{className:"h-4 w-1/3"})]})]}),e.jsx(ve,{children:e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ps,{className:"h-8 w-8 rounded-full mr-2"}),e.jsx(ps,{className:"h-4 w-16"})]}),e.jsx(ps,{className:"h-10 w-14"})]})})]},`skeleton-${P}`))]})})]})}function xc({id:s,children:t}){const{attributes:i,listeners:a,setNodeRef:n,transform:c,transition:o}=de({id:s}),r={transform:Xe.Transform.toString(c),transition:o};return e.jsx("div",{ref:n,style:r,children:t})}function hc({id:s}){const{attributes:t,listeners:i,setNodeRef:a}=de({id:s});return e.jsx("div",{ref:a,...t,...i,children:e.jsx(Ye,{className:"h-4 w-4 cursor-move shrink-0"})})}function uc({name:s,control:t,className:i}){const a=q(),{setValue:n,watch:c}=us(),{fields:o,append:r,remove:N,move:d}=ns({name:s,control:t}),b=ks(),v=Ue(oe(ss),oe(es,{coordinateGetter:Qe})),w=c("target"),k=c("ped"),m=c("prop"),T=async A=>{b.setVisible(!1);const V=await ce("getCoordsInput",{target:w,ped:k,prop:m},{x:0,y:0,z:0},500);b.setVisible(!0),n(`${s}.${A}.coords`,V)},P=async A=>{b.setVisible(!1);const V=c(`${s}.${A}.coords`);await ce("teleport",V)};function z(A){const{active:V,over:$}=A;if(V.id!==$.id){const F=o.findIndex(W=>W.id===V.id),D=o.findIndex(W=>W.id===$.id);d(F,D)}}return e.jsxs("div",{className:R("space-y-4 shrink-0",i),children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(_,{children:a.get("ui_spawner_zone_locations")}),e.jsx(f,{type:"button",variant:"outline",size:"sm",onClick:()=>r({coords:{x:0,y:0,z:0},radius:5,interval:300,maxSpawned:1}),className:"shrink-0",children:a.get("ui_add_spawner_zone_location")})]}),e.jsx(ye,{children:e.jsx(ve,{className:"px-0 flex flex-col",children:e.jsx(Le,{className:"h-96 pr-2",children:e.jsx(Be,{sensors:v,collisionDetection:He,onDragEnd:z,modifiers:[Ge,Ze],children:e.jsx(We,{items:o.map(A=>A.id),strategy:Ke,children:o.map((A,V)=>e.jsx(xc,{id:A.id,children:e.jsxs("div",{className:"flex items-start space-x-2 p-2 border-b",children:[e.jsx(hc,{id:A.id}),e.jsxs("div",{className:"flex-grow space-y-4 pb-2 px-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(_,{children:a.get("ui_coords")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex-grow grid grid-cols-3 gap-2",children:["x","y","z"].map($=>e.jsx(g,{name:`${s}.${V}.coords.${$}`,control:t,render:({field:F})=>e.jsx(j,{children:e.jsx(p,{children:e.jsx(y,{...F,type:"number",placeholder:$.toUpperCase(),step:"0.01",className:"w-full"})})})},`coords.${$}`))}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>T(V),children:e.jsx(Ss,{className:"h-4 w-4"})}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"shrink-0",onClick:()=>P(V),children:e.jsx(ys,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(g,{name:`${s}.${V}.radius`,control:t,render:({field:$})=>e.jsxs(j,{children:[e.jsx(_,{children:a.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{...$,type:"number",step:"0.1",className:"w-full"})})]})}),e.jsx(g,{name:`${s}.${V}.interval`,control:t,render:({field:$})=>e.jsxs(j,{children:[e.jsx(_,{children:a.get("ui_interval")}),e.jsx(p,{children:e.jsx(y,{...$,type:"number",className:"w-full"})})]})}),e.jsx(g,{name:`${s}.${V}.maxSpawned`,control:t,render:({field:$})=>e.jsxs(j,{children:[e.jsx(_,{children:a.get("ui_max_spawned")}),e.jsx(p,{children:e.jsx(y,{...$,type:"number",className:"w-full"})})]})})]})]}),e.jsx(f,{type:"button",variant:"outline",size:"icon",className:"text-red-500 shrink-0",onClick:()=>N(V),children:e.jsx(ts,{className:"h-4 w-4"})})]})},A.id))})})})})})]})}const mc=G({label:H().min(1,"ui_error_required"),progress:H().min(1,"ui_error_required"),icon:H().min(1,"ui_error_required"),radius:O,duration:O,animation:Is.optional(),animationProp:$s.optional(),requiredItem:H().optional(),propModel:js([Cs.number().min(1),H().min(1)]).catch("prop_plant_01a"),interactionOffset:G({x:O,y:O,z:O}),target:B().optional(),items:Wt,locations:Je(G({coords:G({x:O.catch(0),y:O.catch(0),z:O.catch(0)}),radius:O,interval:O,maxSpawned:O}))}),kn={duration:5e3,radius:1.25,label:"",icon:"hand",items:[{name:"",count:{min:1,max:1}}],interactionOffset:{x:0,y:0,z:1},locations:[{coords:{x:0,y:0,z:0,w:0},radius:15,interval:6e4,maxSpawned:20}],propModel:""};function jc({isOpen:s,setIsOpen:t,editingSpawnerZone:i,onSubmit:a}){const n=q(),c=je({resolver:pe(mc),defaultValues:i||kn});x.useEffect(()=>{c.reset(i||kn)},[i]);function o(r){a(r),t(!1)}return e.jsxs(ge,{open:s,onOpenChange:t,children:[e.jsx(Ce,{asChild:!0,children:e.jsxs(f,{onClick:()=>c.reset(),children:[e.jsx(ze,{className:"mr-2 h-4 w-4"})," ",n.get("ui_add_spawner_zone")]})}),e.jsxs(xe,{className:"min-w-fit",children:[e.jsxs(he,{children:[e.jsx(ue,{children:i?n.get("ui_edit_spawner_zone"):n.get("ui_add_spawner_zone")}),e.jsx(me,{})]}),e.jsx(fe,{...c,children:e.jsxs("form",{onSubmit:c.handleSubmit(o,Me),className:"h-fit py-4 w-[50rem]",children:[e.jsxs(Ve,{defaultValue:"basic",children:[e.jsxs(Re,{className:"grid w-full grid-cols-4",children:[e.jsx(J,{value:"basic",children:n.get("ui_basic")}),e.jsx(J,{value:"items",children:n.get("ui_items")}),e.jsx(J,{value:"locations",children:n.get("ui_locations")}),e.jsx(J,{value:"animation",children:n.get("ui_animation")})]}),e.jsxs(U,{value:"basic",className:"space-y-4 shrink-0 py-4",children:[e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"label",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_interaction_label")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_harvest")})}),e.jsx(I,{children:n.get("ui_interaction_label_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"progress",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_progress_text")}),e.jsx(p,{children:e.jsx(y,{...r,placeholder:n.get("ui_harvesting")})}),e.jsx(I,{children:n.get("ui_progress_text_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"icon",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_icon")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_icon_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"radius",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_radius")}),e.jsx(p,{children:e.jsx(y,{type:"number",step:"0.25",...r})}),e.jsx(I,{children:n.get("ui_radius_description")}),e.jsx(E,{})]})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(g,{control:c.control,name:"duration",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_progress_duration")}),e.jsx(p,{children:e.jsx(y,{type:"number",...r})}),e.jsx(I,{children:n.get("ui_progress_duration_description")}),e.jsx(E,{})]})}),e.jsx(g,{control:c.control,name:"requiredItem",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_required_item")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_required_item_description")}),e.jsx(E,{})]})})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsx(g,{control:c.control,name:"propModel",render:({field:r})=>e.jsxs(j,{className:"flex-1",children:[e.jsx(_,{children:n.get("ui_prop_model")}),e.jsx(p,{children:e.jsx(y,{...r})}),e.jsx(I,{children:n.get("ui_prop_model_description")}),e.jsx(E,{})]})})}),e.jsx(_s,{name:"interactionOffset",label:n.get("ui_interaction_offset"),description:n.get("ui_interaction_offset_description"),disableButton:!0}),e.jsx(Fe,{name:"target",description:n.get("ui_target_description")})]}),e.jsx(U,{value:"items",className:"space-y-4 shrink-0 py-4",children:e.jsx(Kt,{name:"items",control:c.control})}),e.jsx(U,{value:"animation",className:"space-y-4 shrink-0 py-4",children:e.jsx(Ps,{name:"animation"})}),e.jsx(U,{value:"locations",className:"space-y-4 shrink-0 py-4",children:e.jsx(uc,{name:"locations",control:c.control})})]}),e.jsx(f,{type:"submit",className:"w-full",children:i?n.get("ui_save_changes"):n.get("ui_add_spawner_zone")})]})})]})]})}function pc(){const s=q(),t=Ne(),{updateJob:i}=le(),[a,n]=x.useState((t==null?void 0:t.advancedCollecting)||[]),[c,o]=x.useState(!1),[r,N]=x.useState(null),[d,b]=x.useState(1),v=6,[w,k]=x.useState(""),[m]=Pe(w,100),T=$e(),P=l=>{o(l),setTimeout(()=>{l||N(null)},200)},z=l=>{i({...t,advancedCollecting:l},"advancedCollecting")},A=l=>{const u=[...a,...(Array.isArray(l)?l:[l]).map(h=>({...h}))];n(u),o(!1),z(u)},V=l=>{if(r){const u=a.map((h,M)=>M===a.findIndex(Z=>Z===r)?l:h);n(u),o(!1),setTimeout(()=>{N(null)},500),z(u)}},$=x.useMemo(()=>a.filter(l=>{var u;return((u=l.label)==null?void 0:u.toLowerCase().includes(m.toLowerCase()))||l.progress.toLowerCase().includes(m.toLowerCase())}),[a,m]),F=x.useMemo(()=>{const l=(d-1)*v;return $.slice(l,l+v)},[$,d]),D=Math.ceil($.length/v),W=x.useCallback(l=>{k(l.target.value),b(1)},[]);return e.jsxs("div",{className:"space-y-4 flex flex-col h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx(y,{placeholder:s.get("ui_search_spawner_zones"),value:w,onChange:W,className:"max-w-sm"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsx(f,{variant:"outline",size:"icon",className:"shrink-0",children:e.jsx(De,{className:"h-4 w-4"})})}),e.jsxs(Q,{align:"end",children:[e.jsx(ne,{getContent:()=>a,contentType:"spawnerZones",isDropdown:!0,text:s.get("ui_copy_all")}),e.jsx(Oe,{contentType:"spawnerZones",onPaste:A,isDropdown:!0})]})]}),e.jsx(jc,{isOpen:c,editingSpawnerZone:r||void 0,setIsOpen:P,onSubmit:r?V:A})]})]}),e.jsx("div",{className:"grow flex flex-col",children:e.jsxs(ae,{className:"table-fixed",children:[e.jsx(ie,{children:e.jsxs(L,{children:[e.jsx(S,{children:s.get("ui_label")}),e.jsx(S,{children:s.get("ui_progress")}),e.jsx(S,{children:s.get("ui_duration")}),e.jsx(S,{children:s.get("ui_actions")})]})}),e.jsx(re,{children:F.length===0?e.jsx(L,{className:"hover:bg-background",children:e.jsx(C,{colSpan:4,className:"h-full hover:bg-background",children:e.jsx(Ee,{searchTerm:m})})}):F.map((l,u)=>e.jsxs(L,{children:[e.jsx(C,{children:l.label}),e.jsx(C,{children:l.progress}),e.jsx(C,{children:l.duration}),e.jsx(C,{children:e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(f,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Open menu"}),e.jsx(Te,{className:"h-4 w-4"})]})}),e.jsxs(Q,{align:"end",children:[e.jsxs(K,{onClick:()=>{N(l),o(!0)},children:[e.jsx(we,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_edit")})]}),e.jsx(ne,{getContent:()=>l,contentType:"spawnerZones",isDropdown:!0}),e.jsxs(K,{className:"text-red-500",onClick:async()=>{if(await T(s.get("ui_delete_spawner_zone"),s.get("ui_delete_spawner_zone_confirm"))){const h=(d-1)*v+u,M=a.filter((Z,X)=>X!==h);n(M),z(M)}},children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:s.get("ui_delete")})]})]})]})})]},u))})]})}),e.jsxs("div",{className:"flex justify-end items-center space-x-2",children:[e.jsx(f,{onClick:()=>b(l=>Math.max(l-1,1)),disabled:d===1,size:"icon",variant:"outline",children:e.jsx(Ae,{className:"h-4 w-4"})}),e.jsx("div",{className:"flex items-center space-x-2",children:[...Array(D)].map((l,u)=>{const h=u+1;return h===1||h===D||h>=d-1&&h<=d+1?e.jsx(f,{variant:d===h?"outline":"ghost",size:"icon",onClick:()=>b(h),children:h},u):h===d-2||h===d+2?e.jsx("span",{children:"..."},u):null})}),e.jsx(f,{onClick:()=>b(l=>Math.min(l+1,D)),disabled:d===D||D===0,size:"icon",variant:"outline",children:e.jsx(Se,{className:"h-4 w-4"})})]})]})}const gc=Pi([{path:"/",element:e.jsx(Ei,{children:e.jsx(ar,{children:e.jsx(Fi,{})})}),children:[{path:"/",element:e.jsx(mr,{})},{path:"/jobs",element:e.jsx(rr,{})},{path:"/settings",element:e.jsx(tc,{})},{path:"/webhooks",element:e.jsx(sc,{})},{path:"/history",element:e.jsx(ac,{})},{path:"/community",element:e.jsx(dc,{})},{path:"/edit/:id",children:[{path:"",element:e.jsx(pr,{})},{path:"grades",element:e.jsx(yr,{})},{path:"actions",element:e.jsx(Sr,{})},{path:"blips",element:e.jsx(Ir,{})},{path:"boss-menus",element:e.jsx(qr,{})},{path:"cloakrooms",element:e.jsx(Br,{})},{path:"collecting",element:e.jsx(Yr,{})},{path:"spawner-zones",element:e.jsx(pc,{})},{path:"crafting",element:e.jsx(cl,{})},{path:"garages",element:e.jsx(bl,{})},{path:"selling",element:e.jsx(zl,{})},{path:"shops",element:e.jsx(Ql,{})},{path:"stashes",element:e.jsx($l,{})},{path:"alarms",element:e.jsx(Fl,{})},{path:"registers",element:e.jsx(Ul,{})},{path:"animation-zones",element:e.jsx(Gl,{})},{path:"music-players",element:e.jsx(Rl,{})},{path:"teleports",element:e.jsx(Ml,{})}]}]}]);Ai.createRoot(document.getElementById("root")).render(e.jsx(Yn.StrictMode,{children:e.jsx(Di,{router:gc})}));
